{"version":3,"sources":["pages/CanvasPage.js","components/Header/Header.js","components/UploadButton/UploadButton.js","pages/IndexPage.js","actions/index.js","components/CanvasButton/CanvasButton.js","helpers/AssetHelper.js","components/Book/Book.js","pages/BooksPage.js","pages/ReorderPage.js","components/Slider/Slider.js","pages/ViewPage.js","pages/PageNotFound.js","App.js","reportWebVitals.js","reducers/sideNav.js","reducers/bottomSlide.js","reducers/backgrounds.js","reducers/shapes.js","reducers/text.js","reducers/fonts.js","reducers/updatePanelState.js","reducers/objectStates.js","reducers/index.js","index.js"],"names":["scalePropsVal","displayContainerDimensions","Header","props","className","icon","faChevronLeft","title","faEllipsisV","UploadButton","uploadImage","name","text","class","type","onChange","e","target","files","BACKEND_URL","Index","useState","books","setBooks","titleValue","setTitleValue","subtitleValue","setSubtitleValue","pageTitleValue","setPageTitleValue","cover","setCover","alert","useAlert","href","map","book","id","onSubmit","preventDefault","console","log","canvasEl","document","createElement","canvas","fabric","Canvas","backgroundColor","selection","formData","FormData","append","JSON","stringify","toJSON","fetch","method","body","then","res","json","show","catch","err","enctype","value","placeholder","showBottomSlide","nr","hideBottomSlide","CanvasButton","dispatch","useDispatch","viewBox","onClick","focusable","prefix","iconName","role","xmlns","fill","d","FontFaceObserver","require","canvas_display","bottomNav","filtersArray","CanvasPage","filterVal","setFilterVal","activePage","setActivePage","images","setImages","backgrounds","useSelector","state","isSideNavActive","shapes","all_text","fonts","updatePanelState","objectStates","canvasContainer","useRef","canvasDisplayContainer","styles","overflow","height","width","useEffect","i","style","containerDimensions","current","getBoundingClientRect","getObjectDimensions","canvasUpdateControls","Object","prototype","set","transparentCorners","borderColor","borderSize","cornerColor","cornerSize","cornerStyle","setControlsVisibility","tl","mt","tr","ml","mr","bl","mb","br","mtr","on","obj","updateObjectsStates","updateObjectProps","headers","loadFromJSON","renderAll","loadImages","page","fontWeight","perctangeWidth","perctangeHeight","strokeWidth","lineHeight","lineSelectorHeight","object","activeObject","shape","image","action","getFilter","filter_val","filters","length","filter","toUpperCase","applyFilter","index","_objects","applyFilters","applyFilterValue","prop","updatePanelStateVal","img","src","controls","Control","x","y","offsetY","cursorStyle","actionHandler","controlsUtils","rotationWithSnapping","actionName","render","ctx","left","top","styleOverride","fabricObject","size","this","save","translate","rotate","util","degreesToRadians","angle","drawImage","restore","withConnection","_original_initHiddenTextarea","IText","initHiddenTextarea","extend","call","wrapperEl","appendChild","hiddenTextarea","addShape","v4","Circle","radius","originX","originY","Rect","strokeUniform","padding","Triangle","pointsStar","spikeCount","outerRadius","innerRadius","Math","PI","cx","cy","sweep","points","cos","sin","push","starPolygonPoints","Polygon","pointsPolygon","sideCount","regularPolygonPoints","scaleToHeight","add","ref","faCloudUploadAlt","faLayerGroup","faTextHeight","faShapes","querySelector","classList","remove","faChevronDown","faBook","toDataURL","faSave","undo","faUndoAlt","faFont","getActiveObject","clone","clonedObj","evented","setActiveObject","faPlusCircle","window","innerWidth","clear","hasControls","selectable","scaleX","scaleY","setDimensions","faAdjust","faTrashAlt","contains","Image","onload","imgInstance","addImage","font","fontFamily","load","requestRenderAll","setFont","parseFloat","toFixed","min","max","step","includes","Brightness","brightness","Saturation","saturation","Contrast","contrast","Blur","blur","color","obj_main","background","fromURL","setBackgroundImage","bind","canvasSetBackground","alt","fontSize","addText","imagePath","path","location","origin","Book","toggleModal","subtitle","Modal","setAppElement","BooksPage","isOpen","setIsOpen","activeBook","setActiveBook","toggleModalFunc","content","border","onRequestClose","contentLabel","cursor","faBars","faAlignCenter","faMinus","ReorderPage","pages","setPages","loadPages","ok","componentBackingInstance","Dragula","prompt","Slider","book_id","currentIndex","setIndex","translateValue","setTranslateValue","slideWidth","clientWidth","Slide","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","LeftArrow","goToPrevSlide","RightArrow","goToNextSlide","faChevronRight","transform","transition","ViewPage","PageNotFound","routes","App","routeResult","useRoutes","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","isSideNavActiveReducer","active_class","isBottomSlideActiveReducer","backgrounds_list","shapes_list","text_list","fonts_list","allReducer","combineReducers","isBottomSlideActive","options","position","positions","center","timeout","offset","transitions","SCALE","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","StrictMode","template","AlertTemplate","getElementById"],"mappings":"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","file":"static/js/main.d4688449.chunk.js","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport Header from \"../components/Header/Header.js\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { fabric } from \"fabric\";\r\n\r\nimport Styles from \"./CanvasPage.css\";\r\nimport Fonts from \"./Fonts.css\";\r\n\r\nimport CanvasButton from \"../components/CanvasButton/CanvasButton.js\";\r\nimport UploadButton from \"../components/UploadButton/UploadButton.js\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faLayerGroup,\r\n  faTextHeight,\r\n  faCloudUploadAlt,\r\n  faShapes,\r\n  faFont,\r\n  faChevronDown,\r\n  faUndoAlt,\r\n  faBook,\r\n  faSave,\r\n  faTrashAlt,\r\n  faPlusCircle,\r\n  faCropAlt,\r\n  faAdjust,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport {\r\n  setCanvas,\r\n  setObjectsState,\r\n  showBottomSlide,\r\n  hideBottomSlide,\r\n  setUpdatePanelState,\r\n} from \"../actions\";\r\nimport { A } from \"hookrouter\";\r\nimport { useAlert } from \"react-alert\";\r\nvar FontFaceObserver = require(\"fontfaceobserver\");\r\n\r\n\r\nconst BACKEND_URL = \"http://127.0.0.1:8000\";\r\nlet canvas = null, canvas_display = null, bottomNav = false, scalePropsVal, displayContainerDimensions, filtersArray = [];\r\n\r\nconst CanvasPage = (props) => {\r\n  const dispatch = useDispatch();\r\n  const [bookName, setBookName] = useState(\"\");\r\n  const [filterVal, setFilterVal] = useState(0);\r\n  const [activePage, setActivePage] = useState();\r\n  const [images, setImages] = useState([]);\r\n\r\n  const alert = useAlert();\r\n\r\n  const isSideNavActive = useSelector((state) => state.isSideNavActive);\r\n  const backgrounds = useSelector((state) => state.backgrounds);\r\n  const shapes = useSelector((state) => state.shapes);\r\n  const all_text = useSelector((state) => state.text);\r\n  const fonts = useSelector((state) => state.fonts);\r\n  const updatePanelState = useSelector((state) => state.updatePanelState);\r\n  const objectStates = useSelector((state) => state.objectStates);\r\n\r\n  const canvasContainer = useRef(null);\r\n  const canvasDisplayContainer = useRef(null);\r\n  const { id } = props;\r\n  var styles = {\r\n    body: {\r\n      overflow: \"hidden\",\r\n      height: \"100vh\",\r\n      width: \"100vw\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    for (var i in styles.body) {\r\n      document.body.style[i] = styles.body[i];\r\n    }\r\n\r\n    const containerDimensions = canvasContainer.current.getBoundingClientRect();\r\n    scalePropsVal = getObjectDimensions(containerDimensions)\r\n\r\n    displayContainerDimensions =\r\n      canvasDisplayContainer.current.getBoundingClientRect();\r\n\r\n    canvas = new fabric.Canvas(\"canvas\", {\r\n      height: containerDimensions.height - 150,\r\n      width: containerDimensions.width - 30,\r\n      backgroundColor: \"#fff\",\r\n      selection: false,\r\n    });\r\n\r\n    canvas_display = new fabric.Canvas(\"canvas_display\", {\r\n      height: containerDimensions.height - 600,\r\n      width: containerDimensions.width - 200,\r\n      backgroundColor: \"#fff\",\r\n      selection: false,\r\n    });\r\n\r\n    canvasUpdateControls();\r\n\r\n    fabric.Object.prototype.set({\r\n      transparentCorners: false,\r\n      borderColor: \"#333333\",\r\n      borderSize: 5,\r\n      cornerColor: \"#333333\",\r\n      cornerSize: 16,\r\n      cornerStyle: \"circle\",\r\n      cornerColor: \"#333333\",\r\n      padding: 10,\r\n    });\r\n\r\n    fabric.Object.prototype.setControlsVisibility({\r\n      tl: true, //top-left\r\n      mt: false, // middle-top\r\n      tr: true, //top-right\r\n      ml: false, //middle-left\r\n      mr: false, //middle-right\r\n      bl: true, // bottom-left\r\n      mb: false, //middle-bottom\r\n      br: true, //bottom-right\r\n      mtr: true, // rotate icon\r\n    });\r\n\r\n    // canvas events\r\n    canvas.on(\"selection:created\", function (e) {\r\n      const obj = e.target;\r\n      updateObjectsStates(obj);\r\n      updateObjectProps(obj);\r\n    });\r\n    canvas.on(\"selection:updated\", function (e) {\r\n      const obj = e.target;\r\n      updateObjectsStates(obj);\r\n      updateObjectProps(obj);\r\n    });\r\n    canvas.on(\"selection:cleared\", function (e) {\r\n      const obj = e.target;\r\n      updateObjectsStates({ name: \"clear\" });\r\n    });\r\n\r\n    fetch(`${BACKEND_URL}/api/book/${id.id}/page/${id.id}`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        setActivePage(res);\r\n        canvas.loadFromJSON(res.canvas, function () {\r\n          canvas.renderAll();\r\n          dispatch(setCanvas(canvas));\r\n          loadImages(res)\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, []);\r\n\r\n  const loadImages = (page) =>{\r\n    fetch(`${BACKEND_URL}/api/book/images/${id.id}/`, {\r\n      method: \"GET\",\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        setImages(res);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  const getObjectDimensions = (containerDimensions) => {\r\n    let fontWeight = 500\r\n    let perctangeWidth = (5 / 100) * containerDimensions.width\r\n    let perctangeHeight = (5 / 100) * containerDimensions.height\r\n\r\n    if(containerDimensions.width < 700){ \r\n        fontWeight = 400\r\n    }\r\n    if(containerDimensions.width < 500){\r\n        fontWeight = 300\r\n    }\r\n    \r\n    return {\r\n        height: perctangeHeight,\r\n        width: perctangeWidth,\r\n        strokeWidth: perctangeWidth / 14,\r\n        fontWeight: fontWeight,\r\n        lineHeight: perctangeHeight * 2,\r\n        lineSelectorHeight: perctangeHeight * .75,\r\n    }\r\n  }\r\n\r\n  const updateObjectProps = (object) => {};\r\n\r\n  const updateObjectsStates = (object) => {\r\n    let obj;\r\n    switch (object.name) {\r\n      case \"text\":\r\n        obj = {\r\n          activeObject: true,\r\n          text: true,\r\n          shape: false,\r\n          image: false,\r\n        };\r\n        break;\r\n      case \"shape\":\r\n        obj = {\r\n          activeObject: true,\r\n          text: false,\r\n          shape: true,\r\n          image: false,\r\n        };\r\n        break;\r\n      case \"image\":\r\n        obj = {\r\n          activeObject: true,\r\n          text: false,\r\n          shape: false,\r\n          image: true,\r\n        };\r\n        break;\r\n      case \"clear\":\r\n        obj = {\r\n          activeObject: false,\r\n          text: false,\r\n          shape: false,\r\n          image: false,\r\n        };\r\n        break;\r\n    }\r\n    dispatch(setObjectsState(obj));\r\n  };\r\n\r\n  const updateImageFilter = (e) => {\r\n    setFilterVal(e.target.value);\r\n    switch (updatePanelState) {\r\n      case \"brightness\":\r\n        if (filtersArray.includes(updatePanelState)) {\r\n          applyFilterValue(0, \"brightness\", parseFloat(e.target.value));\r\n          filtersArray.push(updatePanelState);\r\n        } else {\r\n          applyFilter(\r\n            0,\r\n            new fabric.Image.filters.Brightness({\r\n              brightness: parseFloat(e.target.value),\r\n            })\r\n          );\r\n        }\r\n        break;\r\n      case \"saturation\":\r\n        if (filtersArray.includes(updatePanelState)) {\r\n          applyFilterValue(1, \"saturation\", parseFloat(e.target.value));\r\n          filtersArray.push(updatePanelState);\r\n        } else {\r\n          applyFilter(\r\n            1,\r\n            new fabric.Image.filters.Saturation({\r\n              saturation: parseFloat(e.target.value),\r\n            })\r\n          );\r\n        }\r\n        break;\r\n      case \"contrast\":\r\n        if (filtersArray.includes(updatePanelState)) {\r\n          applyFilterValue(2, \"contrast\", parseFloat(e.target.value));\r\n          filtersArray.push(updatePanelState);\r\n        } else {\r\n          applyFilter(\r\n            2,\r\n            new fabric.Image.filters.Contrast({\r\n              contrast: parseFloat(e.target.value),\r\n            })\r\n          );\r\n        }\r\n        break;\r\n      case \"blur\":\r\n        if (filtersArray.includes(updatePanelState)) {\r\n          applyFilterValue(3, \"blur\", parseFloat(e.target.value));\r\n          filtersArray.push(updatePanelState);\r\n        } else {\r\n          applyFilter(\r\n            3,\r\n            new fabric.Image.filters.Blur({\r\n              blur: parseFloat(e.target.value),\r\n            })\r\n          );\r\n        }\r\n        break;\r\n    }\r\n  };\r\n\r\n  const getFilter = (obj, type) => {\r\n    var filter_val = null;\r\n    if (obj.filters.length > 0) {\r\n      for (var i = 0; i < obj.filters.length; i++) {\r\n        const filter = obj.filters[i];\r\n        if (filter.type.toUpperCase() == type.toUpperCase()) {\r\n          filter_val = filter;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (filter_val) {\r\n      return filter_val[type];\r\n    } else {\r\n      return 0;\r\n    }\r\n  };\r\n\r\n  const applyFilter = (index, filter) => {\r\n    var obj = canvas_display._objects[0];\r\n    obj.filters[index] = filter;\r\n    obj.applyFilters();\r\n    canvas_display.renderAll();\r\n  };\r\n\r\n  const applyFilterValue = (index, prop, value) => {\r\n    var obj = canvas_display._objects[0];\r\n    if (obj.filters[index]) {\r\n      obj.filters[index][prop] = value;\r\n      obj.applyFilters();\r\n      canvas_display.renderAll();\r\n    }\r\n  };\r\n\r\n  const saveFilters = () => {\r\n    const obj = canvas.getActiveObject();\r\n    const filters = canvas_display._objects[0].filters;\r\n    obj.filters = filters;\r\n    obj.applyFilters();\r\n    canvas.renderAll();\r\n    dispatch(hideBottomSlide());\r\n  };\r\n\r\n  const resetFilters = () => {\r\n    setFilterVal(0);\r\n    const obj_main = canvas.getActiveObject();\r\n    const obj = canvas_display._objects[0];\r\n    obj.filters = [];\r\n    obj_main.filters = [];\r\n\r\n    obj.applyFilters();\r\n    obj_main.applyFilters();\r\n    canvas_display.renderAll();\r\n    canvas.renderAll();\r\n  };\r\n\r\n  const updatePanelStateVal = (type) => {\r\n    dispatch(setUpdatePanelState(type));\r\n    setFilterVal(getFilter(canvas_display._objects[0], type));\r\n  };\r\n\r\n  const adjustPanel = () => {\r\n    displayContainerDimensions = {\r\n      width: window.innerWidth * 0.7,\r\n      height: window.innerWidth * 0.7,\r\n    };\r\n    canvas_display.clear();\r\n    canvas.getActiveObject().clone(function (clonedObj) {\r\n      clonedObj.set({\r\n        left: 0,\r\n        top: 0,\r\n        evented: true,\r\n        hasControls: false,\r\n        height: displayContainerDimensions.height,\r\n        width: displayContainerDimensions.width,\r\n        selectable: false,\r\n        scaleX: 1,\r\n        scaleY: 1,\r\n      });\r\n      setFilterVal(getFilter(clonedObj, updatePanelState));\r\n      canvas_display.setDimensions({\r\n        width: displayContainerDimensions.width,\r\n        height: displayContainerDimensions.height,\r\n      });\r\n      // clonedObj.scaleToHeight(displayContainerDimensions.width)\r\n      canvas_display.add(clonedObj);\r\n      canvas_display.renderAll();\r\n    });\r\n    dispatch(showBottomSlide(\"update-container\"));\r\n  };\r\n\r\n  const canvasUpdateControls = () => {\r\n    var rotateIcon =\r\n      \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAhQAAAIUB4uz/wQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHhSURBVEiJrdWxalRBFAbgb8IiqQXXImxKNXabaEAQfABJkVYhr2CpzRrzAMpaWVmksPMNUqVJEVdMY3wBEaKgENDgahyLOzfOvXuXZM0eOMzlzsz//+fMOTMhxmichRDauIkbWEpjwF7yd9iJMX4cCxJjHHG00MMQ8RT/iSe40IjVAL6A3TFgB8mb5vZxG91EGEYIsIajbNMQfayik62bwwpe4Dhb/wff0/fVCkFSnoO/x2JT2DVRy+k86hHdPyFIOc/TsonZ08Azkm7DeT3LCXo15WcGT/u3GiLYLiu0nbEPz5KWBoJ5bCRxJcFhSXA3+9mfFLyB7Doe43lJsJ4RrJ6XoO4tRYeWNjAFCyG8xDW8gk9J/cG0VONDwvw1g0uJ+Os01Ce7mMYvM3iAneTnthBCR1GZMJjqgab0rPpXNOutxNpXpOh1jHH/nEHcyb4HFPf7oWonb2D+P9QvqjZtu5zYNtrqWxOCz6p2ci+/i57WwIfoTgi+me3fRSsnuNcQwR6Wz5iWXPkRFk7m06IrafIbfmeLjxWPygrmMtCOolr6qtf0EdYqAtKGgEeKR2dJ8ZhP+mTu5sorBA1ht/AQP8aA1c+rV+a87iEBNloI4TJupTyXTlHfb9P4Jsb4eRzGXx2eQxOG+L0nAAAAAElFTkSuQmCC\";\r\n    var img = document.createElement(\"img\");\r\n    img.src = rotateIcon;\r\n    fabric.Object.prototype.controls.mtr = new fabric.Control({\r\n      x: 0,\r\n      y: -0.55,\r\n      offsetY: -20,\r\n      cursorStyle: \"pointer\",\r\n      actionHandler: fabric.controlsUtils.rotationWithSnapping,\r\n      actionName: \"rotate\",\r\n      render: renderIcon(img),\r\n      cornerSize: 26,\r\n      withConnection: false,\r\n    });\r\n\r\n    function renderIcon(icon) {\r\n      return function renderIcon(ctx, left, top, styleOverride, fabricObject) {\r\n        var size = this.cornerSize;\r\n        ctx.save();\r\n        ctx.translate(left, top);\r\n        ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle));\r\n        ctx.drawImage(icon, -size / 2, -size / 2, size + 2, size);\r\n        ctx.restore();\r\n      };\r\n    }\r\n\r\n    // enable text editing on full screen mode\r\n    const _original_initHiddenTextarea =\r\n      fabric.IText.prototype.initHiddenTextarea;\r\n    fabric.util.object.extend(\r\n      fabric.IText.prototype,\r\n      /** @lends fabric.IText.prototype */ {\r\n        //fix for : IText not editable when canvas is in a fullscreen element on chrome\r\n        // https://github.com/fabricjs/fabric.js/issues/5126\r\n        initHiddenTextarea: function () {\r\n          _original_initHiddenTextarea.call(this);\r\n          this.canvas.wrapperEl.appendChild(this.hiddenTextarea);\r\n        },\r\n      }\r\n    );\r\n  };\r\n\r\n  const toggleBottomNav = (e) => {\r\n    if (bottomNav) {\r\n      document.querySelector(\".bottom-nav\").classList.remove(\"active\");\r\n      bottomNav = false;\r\n    } else {\r\n      document.querySelector(\".bottom-nav\").classList.add(\"active\");\r\n      bottomNav = true;\r\n    }\r\n  };\r\n\r\n  const slideClick = (e) => {\r\n    if (e.target.classList.contains(\"bottom-slide-container\")) {\r\n      dispatch(hideBottomSlide());\r\n    }\r\n  };\r\n\r\n  // Add text\r\n  const addText = (props) => {\r\n    var uuid = require(\"uuid\");\r\n    var id = uuid.v4();\r\n    let text = new fabric.IText(props.text, {\r\n      left: 100,\r\n      top: 100,\r\n      fontSize: props.fontSize,\r\n      fontWeight: props.fontWeight,\r\n      id: id,\r\n      name: \"text\",\r\n      fontFamily: props.fontFamily,\r\n    });\r\n    canvas.add(text);\r\n    dispatch(hideBottomSlide());\r\n  };\r\n\r\n  // Delete Object\r\n  const deleteObject = (props) => {\r\n    const obj = canvas.getActiveObject();\r\n    if (obj) {\r\n      canvas.remove(obj);\r\n      canvas.renderAll();\r\n    }\r\n  };\r\n\r\n  const undoCanvas = () => {\r\n    canvas.undo();\r\n  };\r\n\r\n  const uploadImage = (cover) => {\r\n    const formData = new FormData()\r\n    formData.append('image', cover, cover.name)\r\n    formData.append('page', activePage.id)\r\n\r\n    fetch(`${BACKEND_URL}/api/book/upload/${id.id}/`, {\r\n      method:\"POST\",\r\n      body:formData\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        setImages([...images, res]);\r\n      })\r\n      .catch((err) => console.log(err));\r\n\r\n    };\r\n\r\n  const saveCanvas = () => {\r\n    fetch(`${BACKEND_URL}/api/book/${id.id}/page/${id.id}/`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        canvas: JSON.stringify(\r\n          canvas.toJSON([\r\n            \"hasControls\",\r\n            \"hasBorders\",\r\n            \"selectable\",\r\n            \"id\",\r\n            \"class\",\r\n            \"name\",\r\n            \"ref_id\",\r\n            \"shapeType\",\r\n          ])\r\n        ),\r\n        image: canvas.toDataURL(),\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        alert.show(\"Canvas saved!\", {\r\n          type: \"success\",\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  // Duplicate Object\r\n  const duplicateObject = (props) => {\r\n    const obj = canvas.getActiveObject();\r\n    if (obj) {\r\n      obj.clone(\r\n        function (clonedObj) {\r\n          clonedObj.set({\r\n            left: clonedObj.left + 30,\r\n            top: clonedObj.top + 10,\r\n            evented: true,\r\n          });\r\n          canvas.add(clonedObj);\r\n          canvas.setActiveObject(clonedObj);\r\n          canvas.renderAll();\r\n        },\r\n        [\r\n          \"hasControls\",\r\n          \"hasBorders\",\r\n          \"selectable\",\r\n          \"id\",\r\n          \"class\",\r\n          \"name\",\r\n          \"ref_id\",\r\n          \"shapeType\",\r\n        ]\r\n      );\r\n    }\r\n  };\r\n\r\n  // Flip Object\r\n  const flipObject = (props) => {\r\n    const obj = canvas.getActiveObject();\r\n    if (obj) {\r\n      obj.set(\"flipX\", !obj[\"flipX\"]);\r\n      canvas.renderAll();\r\n    }\r\n  };\r\n\r\n  // Set font\r\n  const setFont = (props) => {\r\n    const obj = canvas.getActiveObject();\r\n    if (obj) {\r\n      var myfont = new FontFaceObserver(props.fontFamily);\r\n      myfont\r\n        .load()\r\n        .then(function () {\r\n          // when font is loaded, use it.\r\n          obj.set(\"fontFamily\", props.fontFamily);\r\n          canvas.requestRenderAll();\r\n        })\r\n        .catch(function (e) {\r\n          console.log(e);\r\n        });\r\n    }\r\n  };\r\n\r\n  // Add background\r\n  const canvasSetBackground = (props) => {\r\n    fabric.Image.fromURL(props.src, function (img) {\r\n      canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        scaleX: canvas.width / img.width,\r\n        scaleY: canvas.height / img.height,\r\n      });\r\n    });\r\n\r\n    dispatch(hideBottomSlide());\r\n  };\r\n\r\n  // generating star points\r\n  const starPolygonPoints = (spikeCount, outerRadius, innerRadius) => {\r\n    var rot = (Math.PI / 2) * 3;\r\n    var cx = outerRadius;\r\n    var cy = outerRadius;\r\n    var sweep = Math.PI / spikeCount;\r\n    var points = [];\r\n    var angle = 0;\r\n\r\n    for (var i = 0; i < spikeCount; i++) {\r\n      var x = cx + Math.cos(angle) * outerRadius;\r\n      var y = cy + Math.sin(angle) * outerRadius;\r\n      points.push({ x: x, y: y });\r\n      angle += sweep;\r\n\r\n      x = cx + Math.cos(angle) * innerRadius;\r\n      y = cy + Math.sin(angle) * innerRadius;\r\n      points.push({ x: x, y: y });\r\n      angle += sweep;\r\n    }\r\n    return points;\r\n  };\r\n\r\n  const regularPolygonPoints = (sideCount, radius) => {\r\n    var sweep = (Math.PI * 2) / sideCount;\r\n    var cx = radius;\r\n    var cy = radius;\r\n    var points = [];\r\n    for (var i = 0; i < sideCount; i++) {\r\n      var x = cx + radius * Math.cos(i * sweep);\r\n      var y = cy + radius * Math.sin(i * sweep);\r\n      points.push({ x: x, y: y });\r\n    }\r\n    return points;\r\n  };\r\n\r\n  // Add shape\r\n  const addShape = (props) => {\r\n    var uuid = require(\"uuid\");\r\n    var id = uuid.v4();\r\n    let shape;\r\n    switch (props.name) {\r\n      case \"circle\":\r\n        shape = new fabric.Circle({\r\n          name: \"shape\",\r\n          radius: 50,\r\n          left: 200,\r\n          top: 200,\r\n          originX: \"center\",\r\n          originY: \"center\",\r\n          fill: \"#589edb\",\r\n        });\r\n        break;\r\n      case \"rectangle\":\r\n        shape = new fabric.Rect({\r\n          name: \"shape\",\r\n          width: 200,\r\n          height: 100,\r\n          originX: \"center\",\r\n          originY: \"center\",\r\n          left: 200,\r\n          top: 200,\r\n          fill: \"#589edb\",\r\n          transparentCorners: false,\r\n          strokeUniform: true,\r\n          padding: 10,\r\n        });\r\n        break;\r\n      case \"triangle\":\r\n        shape = new fabric.Triangle({\r\n          name: \"shape\",\r\n          width: 100,\r\n          height: 100,\r\n          originX: \"center\",\r\n          originY: \"center\",\r\n          left: 200,\r\n          top: 200,\r\n          fill: \"#589edb\",\r\n        });\r\n        break;\r\n      case \"star\":\r\n        const pointsStar = starPolygonPoints(5, 50, 25);\r\n        shape = new fabric.Polygon(\r\n          pointsStar,\r\n          {\r\n            name: \"shape\",\r\n            originX: \"center\",\r\n            originY: \"center\",\r\n            left: 200,\r\n            top: 200,\r\n            fill: \"#589edb\",\r\n          },\r\n          false\r\n        );\r\n        break;\r\n      case \"polygon\":\r\n        const pointsPolygon = regularPolygonPoints(6, 30);\r\n        shape = new fabric.Polygon(\r\n          pointsPolygon,\r\n          {\r\n            name: \"shape\",\r\n            originX: \"center\",\r\n            originY: \"center\",\r\n            left: 200,\r\n            top: 200,\r\n            height: 100,\r\n            width: 100,\r\n            fill: \"#589edb\",\r\n          },\r\n          false\r\n        );\r\n        break;\r\n      default:\r\n        shape = new fabric.Triangle({\r\n          name: \"shape\",\r\n          width: 100,\r\n          height: 100,\r\n          originX: \"center\",\r\n          originY: \"center\",\r\n          left: 200,\r\n          top: 200,\r\n          fill: \"#589edb\",\r\n          transparentCorners: false,\r\n          strokeUniform: true,\r\n        });\r\n        break;\r\n    }\r\n    shape.scaleToHeight(scalePropsVal.height * 4);\r\n    canvas.add(shape);\r\n    canvas.renderAll();\r\n    dispatch(hideBottomSlide());\r\n  };\r\n\r\n  // Add image\r\n  const addImage = (src) => {\r\n    var uuid = require(\"uuid\");\r\n    var id = uuid.v4();\r\n    let img = new Image();\r\n    img.onload = function () {\r\n      let imgInstance = new fabric.Image(img, {\r\n        id: id,\r\n        left: 100,\r\n        top: 100,\r\n        name: \"image\",\r\n      });\r\n      imgInstance.scaleToHeight(scalePropsVal.height * 4);\r\n      canvas.add(imgInstance);\r\n    };\r\n    img.src = src;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header title={activePage ? activePage.title : \"\"} />\r\n\r\n      <div className=\"container page-padding\">\r\n        <div className=\"canvas-box\" ref={canvasContainer}>\r\n          <canvas id=\"canvas\" />\r\n          <div className=\"canvas-buttons\">\r\n            <CanvasButton\r\n              icon={faCloudUploadAlt}\r\n              text=\"Uploads\"\r\n              id=\"upload_button\"\r\n            />\r\n            <CanvasButton\r\n              icon={faLayerGroup}\r\n              text=\"Backgrounds\"\r\n              id=\"background_button\"\r\n            />\r\n            <CanvasButton icon={faTextHeight} text=\"Text\" id=\"text_button\" />\r\n            <CanvasButton icon={faShapes} text=\"Shapes\" id=\"shapes_button\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"bottom-nav\">\r\n          <span className=\"ham-circle\" onClick={toggleBottomNav}>\r\n            <FontAwesomeIcon icon={faChevronDown} />\r\n          </span>\r\n          <div className=\"nav-buttons\">\r\n          <A href={`/books`}>\r\n            <div className=\"nav-button\">\r\n              <FontAwesomeIcon icon={faBook} />\r\n              <span>\r\n                Books\r\n              </span>\r\n            </div>\r\n            </A>\r\n            <div className=\"nav-button\" onClick={saveCanvas}>\r\n              <FontAwesomeIcon icon={faSave} />\r\n              <span>Save</span>\r\n            </div>\r\n            <div className=\"nav-button\" onClick={undoCanvas}>\r\n              <FontAwesomeIcon icon={faUndoAlt} />\r\n              <span>Undo</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`sidenav ${objectStates.activeObject ? \"\" : \"d_none\"}`}>\r\n          <div\r\n            className={`sidenav-container sidenav-object-container ${\r\n              objectStates.activeObject ? \"\" : \"d_none\"\r\n            }`}\r\n          >\r\n            <div\r\n              className={`nav-button nav-button--secondary ${\r\n                objectStates.text ? \"\" : \"d_none\"\r\n              }`}\r\n              onClick={() => dispatch(showBottomSlide(\"fonts-container\"))}\r\n            >\r\n              <FontAwesomeIcon icon={faFont} />\r\n              <span>Font</span>\r\n            </div>\r\n            <div\r\n              className={`nav-button nav-button--secondary ${\r\n                objectStates.activeObject ? \"\" : \"d_none\"\r\n              }`}\r\n              onClick={duplicateObject}\r\n            >\r\n              <FontAwesomeIcon icon={faPlusCircle} />\r\n              <span>Duplicate</span>\r\n            </div>\r\n            <div\r\n              className={`nav-button nav-button--secondary ${\r\n                objectStates.image || objectStates.object ? \"\" : \"d_none\"\r\n              }`}\r\n              onClick={flipObject}\r\n            >\r\n              <FontAwesomeIcon icon={faUndoAlt} />\r\n              <span>Flip</span>\r\n            </div>\r\n            <div\r\n              className={`nav-button nav-button--secondary ${\r\n                objectStates.image ? \"\" : \"d_none\"\r\n              }`}\r\n              onClick={() => adjustPanel()}\r\n            >\r\n              <FontAwesomeIcon icon={faAdjust} />\r\n              <span>Adjust</span>\r\n            </div>\r\n            <div\r\n              className={`nav-button nav-button--secondary ${\r\n                objectStates.activeObject ? \"\" : \"d_none\"\r\n              }`}\r\n              onClick={deleteObject}\r\n            >\r\n              <FontAwesomeIcon icon={faTrashAlt} />\r\n              <span>Delete</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"bottom-slide-container\" onClick={slideClick}>\r\n          <div className=\"bottom-slide\">\r\n            <div className=\"container page-padding\">\r\n              <div className=\"bottom-slide-tools upload-container\">\r\n                <UploadButton\r\n                  text={\"Upload Image\"}\r\n                  name=\"upload_file\"\r\n                  type=\"file\"\r\n                  uploadImage={uploadImage}\r\n                />\r\n                <br/>\r\n\r\n                  <div className=\"upload-img-container\">\r\n                  {images.map((img, index) => (\r\n                  <div\r\n                    key={index}\r\n                    onClick={() => addImage(BACKEND_URL + img.image)}\r\n                  >\r\n                    <img src={BACKEND_URL + img.image} />\r\n                  </div>\r\n                ))}\r\n                  </div>\r\n              </div>\r\n              <div className=\"bottom-slide-tools fonts-container\">\r\n                <h3 className=\"text-white\">\r\n                  Click to change font family of the text\r\n                </h3>\r\n                {fonts.map((font) => (\r\n                  <div\r\n                    key={font.id}\r\n                    className={\"text-element \" + font.name}\r\n                    onClick={() => setFont(font)}\r\n                  >\r\n                    <span style={{ fontFamily: font.fontFamily }}>\r\n                      {font.name}\r\n                    </span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <div className=\"bottom-slide-tools update-container\">\r\n                <div\r\n                  class=\"canvas-display-container\"\r\n                  ref={canvasDisplayContainer}\r\n                >\r\n                  <canvas id=\"canvas_display\"></canvas>\r\n                </div>\r\n                <div class=\"update-panel\">\r\n                  <div class=\"range-container\">\r\n                    <span className=\"range-display\">\r\n                      {parseFloat(filterVal).toFixed(2)}\r\n                    </span>\r\n                    <input\r\n                      type=\"range\"\r\n                      min=\"-1\"\r\n                      max=\"1\"\r\n                      step=\"0.003921\"\r\n                      value={filterVal}\r\n                      onChange={updateImageFilter}\r\n                    />\r\n                  </div>\r\n                  <h4\r\n                    style={{ color: \"#fff\" }}\r\n                    className=\"state-heading text-capitalize\"\r\n                  >\r\n                    {updatePanelState}\r\n                  </h4>\r\n                  <div className=\"update-panel-container\">\r\n                    <div\r\n                      onClick={() => updatePanelStateVal(\"brightness\")}\r\n                      className=\"brightness active\"\r\n                    >\r\n                      <img src=\"http://localhost:3000/static/images/icons/brightness.svg\" />\r\n                    </div>\r\n                    <div\r\n                      onClick={() => updatePanelStateVal(\"contrast\")}\r\n                      className=\"contrast\"\r\n                    >\r\n                      <img src=\"http://localhost:3000/static/images/icons/contrast.svg\" />\r\n                    </div>\r\n                    <div\r\n                      onClick={() => updatePanelStateVal(\"saturation\")}\r\n                      className=\"saturation\"\r\n                    >\r\n                      <img src=\"http://localhost:3000/static/images/icons/saturation.svg\" />\r\n                    </div>\r\n                    <div\r\n                      onClick={() => updatePanelStateVal(\"blur\")}\r\n                      className=\"blur\"\r\n                    >\r\n                      <img src=\"http://localhost:3000/static/images/icons/blur.svg\" />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"button-container\">\r\n                  <button class=\"btn btn-primary\" onClick={saveFilters}>\r\n                    Save\r\n                  </button>\r\n                  <button\r\n                    class=\"btn btn-trasparent btn-block\"\r\n                    onClick={resetFilters}\r\n                  >\r\n                    Reset\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div className=\"bottom-slide-tools background-container img-container\">\r\n                {backgrounds.map((background) => (\r\n                  <div\r\n                    key={background.id}\r\n                    onClick={() => canvasSetBackground(background)}\r\n                  >\r\n                    <img src={background.src} alt={background.name} />\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <div className=\"bottom-slide-tools text-container\">\r\n                <h3 className=\"text-white\">Click to add text to add to page</h3>\r\n                {all_text.map((text) => (\r\n                  <div\r\n                    key={text.id}\r\n                    className={\"text-element \" + text.type}\r\n                    onClick={() => addText(text)}\r\n                  >\r\n                    <span>{text.text}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <div className=\"bottom-slide-tools shapes-container img-container\">\r\n                {shapes.map((shape) => (\r\n                  <div key={shape.id} onClick={() => addShape(shape)}>\r\n                    <img src={shape.src} alt={shape.name} />\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CanvasPage;\r\n","import Styles from './Header.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faChevronLeft, faEllipsisV } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst Header = (props) => {\r\n    return (\r\n        <header>\r\n            <div className=\"container\">\r\n                <div className=\"navigation\">\r\n                    <div className=\"navigation-back\">\r\n                        <FontAwesomeIcon icon={faChevronLeft} />\r\n                    </div>\r\n                    <div className=\"page-title\">\r\n                        {props.title}\r\n                    </div>\r\n                    <div className=\"menu-ham\">\r\n                        <FontAwesomeIcon icon={faEllipsisV} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header;","import Styles from './UploadButton.css';\r\n\r\nconst UploadButton = ({uploadImage, name, text}) => {\r\n    return (\r\n        <div class=\"upload-btn-wrapper\">\r\n            <button class=\"btn btn-primary btn-block\">{text}</button>\r\n            <input type=\"file\" name={name} onChange={(e) => uploadImage(e.target.files[0])}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UploadButton;","import {A} from 'hookrouter';\r\nimport { useState } from 'react';\r\nimport { fabric } from \"fabric\";\r\nimport Header from '../components/Header/Header.js';\r\nimport Styles from './IndexPage.css';\r\nimport UploadButton from '../components/UploadButton/UploadButton.js'\r\nimport { useAlert } from 'react-alert'\r\n\r\nconst BACKEND_URL = \"http://127.0.0.1:8000\"\r\nconst Index = () => {\r\n    const [books, setBooks] = useState([]);\r\n    const [titleValue, setTitleValue] = useState(\"\");\r\n    const [subtitleValue, setSubtitleValue] = useState(\"\");\r\n    const [pageTitleValue, setPageTitleValue] = useState(\"\");\r\n    const [cover, setCover] = useState();\r\n\r\n    const alert = useAlert()\r\n\r\n    \r\n    const addBook = (e) => {\r\n        e.preventDefault();\r\n        console.log(cover)\r\n        const canvasEl = document.createElement(\"canvas\")\r\n        var canvas = new fabric.Canvas(canvasEl, {\r\n            backgroundColor: \"#fff\",\r\n            selection: false,\r\n        });\r\n        const formData = new FormData();\r\n        formData.append('canvas',  JSON.stringify(canvas.toJSON()));\r\n        // formData.append('cover', cover.name);\r\n        formData.append('cover', cover, cover.name); \r\n        formData.append('name', titleValue);\r\n        formData.append('subtitle', subtitleValue);\r\n        formData.append('title', pageTitleValue);\r\n        formData.append('image', `${BACKEND_URL}/static/images/blank.jpg`)\r\n        fetch(`${BACKEND_URL}/api/book/`, {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n        .then(res => res.json())\r\n        .then(res => {\r\n            setBooks([...books, res]);\r\n            alert.show('Book created successfully!', {\r\n                type: 'success',\r\n            })\r\n            }\r\n        ).catch(err=>console.log(err))\r\n    }\r\n    \r\n    return (\r\n        <>\r\n        <Header title=\"Scrapbook App\"/>\r\n        <div className=\"all-books-container\">\r\n        <A className=\"btn btn-primary btn-sm\" href={`/books`}>View all books</A>\r\n        </div>\r\n\r\n        <div className=\"page-container reorder-page\">\r\n            <div className=\"container page-padding\"> \r\n                <div class=\"flex-container\">\r\n                    <div>\r\n                        {books.map(book => (\r\n                            <div key={book.id}>\r\n                                <ul>\r\n                                    <li><A href={`pages/${book.id}`}>{book.name}</A></li>\r\n                                </ul>\r\n                            </div>\r\n                        ))}\r\n                        <form onSubmit={addBook} enctype=\"multipart/form-data\">\r\n                            <input value={titleValue} onChange={ (e) => setTitleValue(e.target.value)} type=\"text\" placeholder=\"Book Title\"/>\r\n                            <input value={subtitleValue} onChange={ (e) => setSubtitleValue (e.target.value)} type=\"text\" placeholder=\"Book Subtitle\"/>\r\n                            <input value={pageTitleValue} onChange={ (e) => setPageTitleValue (e.target.value)} type=\"text\" placeholder=\"First Page name\"/>\r\n                            <br/>\r\n                            <UploadButton text={\"Upload Book Cover\"} name=\"upload_file\" uploadImage={setCover}/>\r\n                            <br/>\r\n                            <br/>\r\n                            <button type=\"submit\" value=\"Submit\" className=\"btn btn-primary\">Create new book</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Index;\r\n","export const showSideNav = (nr) => {\r\n    return {\r\n        type: \"SHOW_SIDENAV\",\r\n        id: nr\r\n    };\r\n};\r\n\r\nexport const hideSideNav = (nr) => {\r\n    return {\r\n        type: \"HIDE_SIDENAV\",\r\n        id: nr\r\n    };\r\n};\r\n\r\nexport const showBottomSlide = (nr) => {\r\n    return {\r\n        type: \"SHOW_BOTTOMSLIDE\",\r\n        id: nr\r\n    };\r\n};\r\n\r\nexport const setCanvas = (nr) => {\r\n    return {\r\n        type: \"SET_CANVAS\",\r\n        canvas: nr\r\n    };\r\n};\r\n\r\nexport const hideBottomSlide = (nr) => {\r\n    return {\r\n        type: \"HIDE_BOTTOMSLIDE\",\r\n        id: nr\r\n    };\r\n};\r\n\r\nexport const setUpdatePanelState = (nr) => {\r\n    return {\r\n        type: \"SET_UPATE_PANEL_STATE\",\r\n        action: nr\r\n    };\r\n};\r\n\r\nexport const setObjectsState = (nr) => {\r\n    return {\r\n        type: \"SET_OBJECTS_STATE\",\r\n        action: nr\r\n    };\r\n};","import Styles from './CanvasButton.css';\r\nimport {useSelector,useDispatch} from 'react-redux';\r\nimport {showSideNav,hideSideNav, showBottomSlide, hideBottomSlide} from '../../actions';\r\n\r\n\r\nconst CanvasButton = (props) => {\r\n    const dispatch = useDispatch()\r\n\r\n    const viewBox = `0 0 ${props.icon.icon[0]} ${props.icon.icon[1]}`\r\n    return(\r\n        <div className=\"canvas-button\" id={props.id} onClick={ () => dispatch(showBottomSlide(props.id)) }>\r\n            <svg aria-hidden=\"true\" focusable=\"false\" data-prefix={props.icon.prefix} data-icon={props.icon.iconName} class=\"svg-inline--fa \" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox={viewBox}><path fill=\"currentColor\" d={props.icon.icon[4]}></path></svg>\r\n            <span>{props.text}</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CanvasButton;","export const imagePath = (path) => {\r\n    return `${window.location.origin}/static/images/${path}`\r\n}\r\n\r\nexport const ROOT_URL = () => {\r\n    return `http://127.0.0.1:8000`\r\n}\r\n  ","import Styles from './Book.css';\r\nimport {ROOT_URL} from '../../helpers/AssetHelper.js';\r\n\r\nconst Book = ({book, toggleModal}) => {\r\n    return (\r\n        <div className=\"book\" onClick={() => toggleModal(book)}>\r\n\t\t\t<div className=\"text\">\r\n\t\t\t\t<h1>{book.name}</h1>\r\n\t\t\t\t<p>{book.subtitle}</p>\r\n\t\t\t\t<div className=\"img-container\">\r\n\t\t\t\t\t<img src={ROOT_URL() + book.cover} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"dots\">\r\n\t\t\t\t<div className=\"dot\"></div>\r\n\t\t\t\t<div className=\"dot\"></div>\r\n\t\t\t\t<div className=\"dot\"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n    )\r\n}\r\n\r\nexport default Book;","import Styles from \"./BooksPage.css\";\r\nimport Header from \"../components/Header/Header.js\";\r\nimport Book from \"../components/Book/Book.js\";\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport Modal from \"react-modal\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faPlus,\r\n  faMinus,\r\n  faBars,\r\n  faAlignCenter,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useAlert } from 'react-alert'\r\nimport { A } from \"hookrouter\";\r\nModal.setAppElement(\"#root\");\r\nconst BACKEND_URL = \"http://127.0.0.1:8000\";\r\n\r\nconst BooksPage = (props) => {\r\n  const [books, setBooks] = useState([]);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [activeBook, setActiveBook] = useState();\r\n  const alert = useAlert()\r\n\r\n  const customStyles = {\r\n    content: {\r\n      border: \"0\",\r\n      background: \"transparent\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetch(`${BACKEND_URL}/api/book/`)\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        setBooks(res);\r\n      });\r\n  }, []);\r\n\r\n  function toggleModal() {\r\n    setIsOpen(!isOpen);\r\n  }\r\n\r\n  const deleteBook = () => {\r\n    fetch(`${BACKEND_URL}/api/book/${activeBook.id}/`, {\r\n      method: \"DELETE\",\r\n    }).then(() => {\r\n      alert.show(\"Book deleted successfully\")\r\n      toggleModal();\r\n      setBooks(books.filter((book) => book.id !== activeBook.id));\r\n    });\r\n  };\r\n\r\n  const toggleModalFunc = (book) => {\r\n    setIsOpen(!isOpen);\r\n    setActiveBook(book);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Modal\r\n        style={customStyles}\r\n        isOpen={isOpen}\r\n        onRequestClose={toggleModal}\r\n        contentLabel=\"My dialog\"\r\n      >\r\n        <div class=\"modale\" aria-hidden=\"true\">\r\n          <div class=\"modal-dialog\">\r\n            <div class=\"modal-header\">\r\n              <h2>{activeBook ? activeBook.name : \"\"}</h2>\r\n              <span\r\n                onClick={toggleModal}\r\n                style={{ cursor: \"pointer\" }}\r\n                class=\"btn-close closemodale\"\r\n                aria-hidden=\"true\"\r\n              >\r\n                &times;\r\n              </span>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n              <A href={`/view/${activeBook ? activeBook.id : \"\"}`}>\r\n                <div className=\"modal-item\">\r\n                  <div className=\"modal-item-icon\">\r\n                    <FontAwesomeIcon icon={faBars} />\r\n                  </div>\r\n                  <div className=\"modal-item-title\">View book</div>\r\n                </div>\r\n              </A>\r\n              <A href={`/pages/${activeBook ? activeBook.id : \"\"}`}>\r\n                <div className=\"modal-item\">\r\n                  <div className=\"modal-item-icon\">\r\n                    <FontAwesomeIcon icon={faAlignCenter} />\r\n                  </div>\r\n                  <div className=\"modal-item-title\">Reorder pages</div>\r\n                </div>\r\n              </A>\r\n\r\n              <div className=\"modal-item\" onClick={deleteBook}>\r\n                <div className=\"modal-item-icon\">\r\n                  <FontAwesomeIcon icon={faMinus} />\r\n                </div>\r\n                <div className=\"modal-item-title\">Delete Book</div>\r\n              </div>\r\n            </div>\r\n            <div class=\"modal-footer\"></div>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n      <Header title=\"My Books\" />\r\n      <div className=\"page-container books-page\">\r\n        <div className=\"container page-padding\">\r\n          <div className={`alert-container ${books.length > 0 ? \"d_none\" : \"\"}`}>\r\n            <p>You currently have created no books, create a new book now.</p>\r\n            <button class=\"btn btn-primary btn-sm\"><A href={`/`}>Create Book</A></button>\r\n          </div>\r\n          <div className=\"books-container\">\r\n            {books.map((book) => (\r\n              <Book\r\n                toggleModal={toggleModalFunc}\r\n                key={book.id}\r\n                book={book}\r\n                onClick={() => toggleModal()}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BooksPage;\r\n","import Header from '../components/Header/Header.js';\r\nimport Dragula from 'react-dragula';\r\nimport React, {useEffect,useRef, useState} from \"react\";\r\nimport ContextStyles from './ReactContextMenu.css';\r\nimport Styles from './ReorderPage.css';\r\nimport {A} from 'hookrouter';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faMinus, faBars }  from '@fortawesome/free-solid-svg-icons';\r\nimport Modal from \"react-modal\";\r\nimport { fabric } from \"fabric\";\r\nimport { useAlert } from 'react-alert'\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nconst BACKEND_URL = \"http://127.0.0.1:8000\"\r\n\r\nconst ReorderPage = (props) => {\r\n    const [pages, setPages] = useState([]);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [activePage, setActivePage] = useState();\r\n    const alert = useAlert()\r\n\r\n    const { id } = props;\r\n\r\n    const canvasEl = document.createElement(\"canvas\")\r\n    var canvas = new fabric.Canvas(canvasEl, {\r\n        backgroundColor: \"#fff\",\r\n        selection: false,\r\n    });\r\n\r\n    const styles = {\r\n        body: {\r\n            backgroundColor: '#ddd',\r\n        }\r\n    } \r\n    const customStyles = {\r\n        content: {\r\n          border: '0',\r\n          background: 'transparent',\r\n        },\r\n    };\r\n    useEffect(() => {\r\n        loadPages()\r\n\r\n\r\n        for(var i in styles.body){\r\n            document.body.style[i] = styles.body[i];\r\n        }\r\n    }, []);\r\n\r\n\r\n    const toggleModal = () => {\r\n        setIsOpen(!isOpen);\r\n    }\r\n\r\n    const loadPages = () => {\r\n        fetch(`${BACKEND_URL}/api/book/${id.id}/`)\r\n            .then(res => {\r\n                if (res.ok)\r\n                    return res.json()\r\n            })\r\n            .then(res => {\r\n                setPages(res.pages);\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n\r\n    const toggleModalFunc = (book) => {\r\n\r\n        setIsOpen(!isOpen);\r\n        setActivePage(book)\r\n        toggleModal()\r\n    }\r\n\r\n    const deletePage = () => {\r\n        fetch(`${BACKEND_URL}/api/book/${activePage.book}/page/${activePage.id}/`, {\r\n            method: \"DELETE\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            }\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    alert.show('Page deleted successfully')\r\n                    loadPages()\r\n                    toggleModal()\r\n            }\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n\r\n\r\n    const addPage = () => {\r\n        const name = prompt(\"Enter page name\");\r\n        if (name){\r\n            fetch(`${BACKEND_URL}/api/book/${id.id}/page/`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    canvas: JSON.stringify(canvas.toJSON()),\r\n                    title: name,\r\n                    image: `${BACKEND_URL}/static/images/blank.jpg`\r\n                })\r\n            })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                alert.show('Page added successfully!', {\r\n                    type: 'success',\r\n                })\r\n                loadPages()\r\n            }\r\n            ).catch(err=>console.log(err))\r\n        }\r\n    }\r\n\r\n\r\n    const dragulaDecorator = (componentBackingInstance) => {\r\n        if (componentBackingInstance) {\r\n          let options = { };\r\n          Dragula([componentBackingInstance], options);\r\n        }\r\n      };\r\n    return (\r\n        <>\r\n            <Modal style={customStyles} isOpen={isOpen}\r\n                onRequestClose={toggleModal}\r\n                contentLabel=\"My dialog\">\r\n            <div class=\"modale\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-header\">\r\n                <h2>{activePage ? activePage.name : \"\"}</h2>\r\n                <a onClick={toggleModal} href=\"#\" class=\"btn-close closemodale\" aria-hidden=\"true\">&times;</a>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <div className=\"modal-item\">\r\n                        <div className=\"modal-item-icon\">\r\n                            <FontAwesomeIcon icon={faBars} />\r\n                        </div>\r\n                        <div className=\"modal-item-title\"><A href={`/edit/${activePage ? activePage.id : \"\"}`}>Edit Page</A></div>\r\n                    </div>\r\n\r\n                    <div className=\"modal-item\" onClick={deletePage}>\r\n                        <div className=\"modal-item-icon\">\r\n                            <FontAwesomeIcon icon={faMinus} />\r\n                        </div>\r\n                        <div className=\"modal-item-title\">Delete Page</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                </div>\r\n            </div>\r\n            </div>\r\n            </Modal>\r\n\r\n\r\n            <Header title=\"Book Name\"/>\r\n            <div className=\"page-container reorder-page\">\r\n                <div className=\"container page-padding\"> \r\n                    <div className=\"pages-container\" ref={dragulaDecorator}>\r\n                        {pages.map((page, index) =>\r\n                            <div onClick={() => toggleModalFunc(page)} className=\"page-el\">\r\n                                <div className=\"page-el-cover\" style={{background: `url(\"${page.image}\")`}}></div>\r\n                                <span>{index+1}</span>\r\n                            </div>\r\n                        )}\r\n                        <div className=\"page-el\" onClick={addPage}>\r\n                            <div title=\"Add Page\" className=\"page-el-cover page-el-cover--add\" style={{background: `url(\"https://storage.needpix.com/rsynced_images/instagram-3814061_1280.png\")`}}></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n    \r\n}\r\n\r\nexport default ReorderPage;","import Styles from './Slider.css';\r\nimport React, {useEffect, useState, useRef } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {faChevronRight, faChevronLeft} from '@fortawesome/free-solid-svg-icons';\r\nconst BACKEND_URL = \"http://127.0.0.1:8000\"\r\n\r\nconst Slider = ({book_id}) => {\r\n  const [pages, setPages] = useState([]);\r\n\r\n    useEffect(() => {\r\n      fetch(`${BACKEND_URL}/api/book/${book_id}/`)\r\n      .then(res => {\r\n          if (res.ok)\r\n              return res.json()\r\n      })\r\n      .then(res => {\r\n          setPages(res.pages);\r\n          console.log(res.pages)\r\n      })\r\n      .catch(err => console.log(err))\r\n    }, []);\r\n\r\n\r\n    var [currentIndex, setIndex] = useState(0);\r\n    var [translateValue, setTranslateValue] = useState(0);\r\n\r\n\r\n    const goToPrevSlide = () => {\r\n        if(currentIndex === 0)\r\n          return;\r\n        \r\n          setIndex(currentIndex-1)\r\n          setTranslateValue(translateValue + (slideWidth()))\r\n    }\r\n    \r\n    const goToNextSlide = () => {\r\n        if(currentIndex === pages.length - 1) {\r\n          setIndex(currentIndex = 0)\r\n          return setTranslateValue(translateValue = 0)\r\n        }\r\n        \r\n        setIndex(currentIndex+1)\r\n        setTranslateValue(translateValue + (-slideWidth()))\r\n    }\r\n    \r\n    const  slideWidth = () => {\r\n        return document.querySelector('.slide').clientWidth\r\n    }\r\n\r\n    const Slide = ({ image }) => {\r\n        const styles = {\r\n            backgroundImage: `url(${image})`,\r\n            backgroundSize: '100% 100%',\r\n            backgroundRepeat: 'no-repeat',\r\n            backgroundPosition: '50% 60%'\r\n        }\r\n        return <div className=\"slide\" style={styles}></div>\r\n    }\r\n    \r\n    \r\n    const LeftArrow = (props) => {\r\n        return (\r\n            <div className=\"backArrow arrow\" onClick={props.goToPrevSlide}>\r\n                <FontAwesomeIcon icon={faChevronLeft} />\r\n            </div>\r\n        );\r\n    }\r\n    \r\n    \r\n    const RightArrow = (props) => {\r\n        return (\r\n            <div className=\"nextArrow arrow\" onClick={props.goToNextSlide}>\r\n                <FontAwesomeIcon icon={faChevronRight} />\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n        <div className=\"slider\">\r\n  \r\n          <div className=\"slider-wrapper\"\r\n            style={{\r\n              transform: `translateX(${translateValue}px)`,\r\n              transition: 'transform ease-out 0.45s'\r\n            }}>\r\n              {\r\n                pages.map((page, i) => (\r\n                  <Slide key={i} image={page.image} />\r\n                ))\r\n              }\r\n          </div>\r\n  \r\n          <LeftArrow\r\n           goToPrevSlide={goToPrevSlide}\r\n          />\r\n  \r\n          <RightArrow\r\n           goToNextSlide={goToNextSlide}\r\n          />\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default Slider;","import Header from '../components/Header/Header.js';\r\nimport Slider from '../components/Slider/Slider.js';\r\nimport React, {useEffect,useRef} from \"react\";\r\n\r\nconst ViewPage = (props) => {\r\n    const { id } = props;\r\n\r\n    const styles = {\r\n        body: {\r\n            overflow: 'hidden',\r\n            height: \"100vh\",\r\n            width: \"100vw\",\r\n        }\r\n    } \r\n\r\n    useEffect(() => {\r\n        for(var i in styles.body){\r\n            document.body.style[i] = styles.body[i];\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <Header title=\"Book Name\"/>\r\n            <div className=\"page-container reorder-page\">\r\n                <div className=\"\"> \r\n                    <Slider book_id={id.id}/>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n    \r\n}\r\n\r\nexport default ViewPage;","const PageNotFound = (props) => {\r\n    return (\r\n        <p>404</p>\r\n    )\r\n}\r\n\r\nexport default PageNotFound;","import Styles from './App.css';\r\nimport {useRoutes} from 'hookrouter';\r\nimport IndexPage from './pages/IndexPage.js';\r\nimport CanvasPage from './pages/CanvasPage.js';\r\nimport BooksPage from './pages/BooksPage.js';\r\nimport ReorderPage from './pages/ReorderPage.js';\r\nimport ViewPage from './pages/ViewPage.js';\r\nimport PageNotFound from './pages/PageNotFound.js';\r\n\r\nconst routes = {\r\n  '/': () => <IndexPage/>,\r\n  '/pages/:id': (id) => <ReorderPage id={id}/>,\r\n  '/edit/:id': (id) => <CanvasPage id={id}/>,\r\n  '/books': () => <BooksPage />,\r\n  '/view/:id': (id) => <ViewPage id={id}/>,\r\n};\r\n\r\n\r\nexport default function App() {\r\n  const routeResult = useRoutes(routes);\r\n\r\n  return (\r\n      <> \r\n        {routeResult || <PageNotFound />}\r\n      </>\r\n  );\r\n}","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","const isSideNavActiveReducer = (state = false, action)=>{\r\n    var active_class = null\r\n    switch(action.type){\r\n        case \"SHOW_SIDENAV\":\r\n            switch(action.id){\r\n                case \"text\":\r\n                    active_class = \"sidenav-text-container\"\r\n                    break;\r\n                case \"object\":\r\n                    active_class = \"sidenav-object-container\"\r\n                    break;\r\n            }\r\n            if(document.querySelector(\".sidenav\")){\r\n                if(document.querySelector(\".sidenav-container.active\")){\r\n                    document.querySelector(\".sidenav-container.active\").classList.remove(\"active\")\r\n                }\r\n                document.querySelector(\".sidenav\").classList.add(\"active\")\r\n                document.querySelector(`.${active_class}`).classList.add(\"active\")\r\n            }\r\n            return !state;\r\n        case \"HIDE_SIDENAV\":\r\n            if(document.querySelector(\".sidenav\")){\r\n                document.querySelector(\".sidenav\").classList.remove(\"active\")\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport default isSideNavActiveReducer;","const isBottomSlideActiveReducer = (state = false, action)=>{\r\n    var active_class = null\r\n    switch(action.type){\r\n        case \"SHOW_BOTTOMSLIDE\":\r\n            switch(action.id){\r\n                case \"upload_button\":\r\n                    active_class = \"upload-container\"\r\n                    break;\r\n                case \"background_button\":\r\n                    active_class = \"background-container\"\r\n                    break;\r\n                case \"text_button\":\r\n                    active_class = \"text-container\"\r\n                    break;\r\n                case \"shapes_button\":\r\n                    active_class = \"shapes-container\"\r\n                    break;\r\n                case \"fonts-container\":\r\n                    active_class = \"fonts-container\"\r\n                    break;\r\n                default:\r\n                    active_class = action.id\r\n                    break;\r\n            }\r\n\r\n            console.log(active_class)\r\n            if(document.querySelector(\".bottom-slide-container\")){\r\n                if(document.querySelector(`.bottom-slide-tools.active`)){\r\n                    document.querySelector(`.bottom-slide-tools.active`).classList.remove(\"active\")\r\n                }\r\n                document.querySelector(\".bottom-slide-container\").classList.add(\"active\")\r\n                document.querySelector(`.${active_class}`).classList.add(\"active\")\r\n            }\r\n            return !state;\r\n        case \"HIDE_BOTTOMSLIDE\":\r\n            if(document.querySelector(\".bottom-slide-container\")){\r\n                document.querySelector(\".bottom-slide-container\").classList.remove(\"active\")\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport default isBottomSlideActiveReducer;","import {imagePath} from '../helpers/AssetHelper';\r\n\r\nconst backgrounds = (state = false, action)=>{\r\n\r\n    const backgrounds_list = [\r\n        {\r\n            id: \"1\",\r\n            src: `${imagePath(\"backgrounds/1.jpg\")}`\r\n        },\r\n        {\r\n            id: \"2\",\r\n            src: `${imagePath(\"backgrounds/2.jpg\")}`\r\n        },\r\n        {\r\n            id: \"3\",\r\n            src: `${imagePath(\"backgrounds/3.jpg\")}`\r\n        },\r\n        {\r\n            id: \"4\",\r\n            src: `${imagePath(\"backgrounds/4.jpg\")}`\r\n        },\r\n        {\r\n            id: \"5\",\r\n            src: `${imagePath(\"backgrounds/5.jpg\")}`\r\n        }\r\n    ]\r\n\r\n    return backgrounds_list;\r\n    \r\n}\r\n\r\n\r\nexport default backgrounds;","import {imagePath} from '../helpers/AssetHelper';\r\n\r\nconst shapes = (state = false, action)=>{\r\n\r\n    const shapes_list = [\r\n        {\r\n            id: \"1\",\r\n            src: `${imagePath(\"shapes/circle.svg\")}`,\r\n            name: \"circle\"\r\n        },\r\n        {\r\n            id: \"2\",\r\n            src: `${imagePath(\"shapes/polygon.svg\")}`,\r\n            name: \"polygon\"\r\n        },\r\n        {\r\n            id: \"3\",\r\n            src: `${imagePath(\"shapes/rectangle.svg\")}`,\r\n            name: \"rectangle\"\r\n        },\r\n        {\r\n            id: \"4\",\r\n            src: `${imagePath(\"shapes/triangle.svg\")}`,\r\n            name: \"triangle\"\r\n        },\r\n        {\r\n            id: \"5\",\r\n            src: `${imagePath(\"shapes/star.svg\")}`,\r\n            name: \"star\"\r\n        }\r\n    ]\r\n\r\n    return shapes_list;\r\n    \r\n}\r\n\r\n\r\nexport default shapes;","const text = (state = false, action)=>{\r\n\r\n    const text_list = [\r\n        {\r\n            id: \"1\",\r\n            text: \"Add a heading\",\r\n            type: \"large\",\r\n            fontSize: 32,\r\n            fontWeight: 700,\r\n            fontFamily: \"Roboto\",\r\n            type: \"large\",\r\n        },\r\n        {\r\n            id: \"2\",\r\n            text: \"Add a subheading\",\r\n            fontSize: 22,\r\n            fontWeight: 500,\r\n            fontFamily: \"Roboto\",\r\n            type: \"medium\"\r\n        },\r\n        {\r\n            id: \"3\",\r\n            text: \"Add a little bit of body text\",\r\n            fontSize: 16,\r\n            fontWeight: 100,\r\n            fontFamily: \"Roboto\",\r\n            type: \"small\"\r\n        },\r\n    ]\r\n\r\n    return text_list;\r\n    \r\n}\r\n\r\n\r\nexport default text;","\r\nimport imagePath from '../helpers/AssetHelper';\r\n\r\nconst fonts = (state = false, action)=>{\r\n\r\n    const fonts_list = [\r\n        {\r\n            id: \"1\",\r\n            name: `Roboto`,\r\n            fontFamily: \"Roboto\"\r\n        },\r\n        {\r\n            id: \"2\",\r\n            name: `Pacifico`,\r\n            fontFamily: \"Pacifico\"\r\n        },\r\n        {\r\n            id: \"3\",\r\n            name: `Montez`,\r\n            fontFamily: \"Montez\"\r\n        },\r\n        {\r\n            id: \"4\",\r\n            name: `Josefin Sans`,\r\n            fontFamily: \"Josefin Sans\"\r\n        },\r\n        {\r\n            id: \"5\",\r\n            name: `Lobster`,\r\n            fontFamily: \"Lobster\"\r\n        },\r\n    ]\r\n\r\n    return fonts_list;\r\n    \r\n}\r\n\r\n\r\nexport default fonts;","const updatePanelState = (state = \"brightness\", action)=>{\r\n    if(action.type === \"SET_UPATE_PANEL_STATE\"){\r\n        state = action.action\r\n        if(document.querySelector(`.${action.action}`)){\r\n            if(document.querySelector(`.update-panel-container .active`)){\r\n                document.querySelector(`.update-panel-container .active`).classList.remove(\"active\")\r\n            }\r\n            document.querySelector(`.update-panel-container .${action.action}`).classList.add(\"active\")\r\n        }\r\n    }\r\n\r\n    return state\r\n}\r\nexport default updatePanelState;","const objectStates = (state = {activeObject: false, shape: false, image: false, text: false}, action)=>{\r\n    if(action.type === \"SET_OBJECTS_STATE\"){\r\n        state = {activeObject: action.action.activeObject, image: action.action.image, shape: action.action.shape, text: action.action.text}\r\n    }\r\n\r\n    return state;\r\n}\r\nexport default objectStates;\r\n","import isSideNavActiveReducer from './sideNav';\r\nimport isBottomSlideActiveReducer from './bottomSlide';\r\nimport backgrounds from './backgrounds';\r\nimport shapes from './shapes';\r\nimport text from './text';\r\nimport fonts from './fonts';\r\nimport updatePanelState from './updatePanelState';\r\nimport objectStates from './objectStates';\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nconst allReducer = combineReducers({\r\n    isSideNavActive: isSideNavActiveReducer,\r\n    isBottomSlideActive: isBottomSlideActiveReducer,\r\n    backgrounds: backgrounds,\r\n    shapes: shapes,\r\n    text: text,\r\n    fonts: fonts,\r\n    updatePanelState: updatePanelState,\r\n    objectStates: objectStates,\r\n})\r\n\r\nexport default allReducer;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {createStore} from 'redux';\r\nimport allReducer from './reducers';\r\nimport {Provider} from 'react-redux';\r\nimport { transitions, positions, Provider as AlertProvider } from 'react-alert'\r\nimport AlertTemplate from 'react-alert-template-basic'\r\n\r\nconst options = {\r\n  // you can also just use 'bottom center'\r\n  position: positions.center,\r\n  timeout: 5000,\r\n  offset: '30px',\r\n  // you can also just use 'scale'\r\n  transition: transitions.SCALE\r\n}\r\nconst store = createStore(allReducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n    <AlertProvider template={AlertTemplate} {...options}>\r\n      <App />\r\n      </AlertProvider>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}