(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){},59:function(e,t){},60:function(e,t){},61:function(e,t){},62:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var c,a,i=n(27),o=n(1),s=n.n(o),r=n(10),l=n.n(r),d=(n(43),n(44),n(7)),b=n(20),j=n(6),u=n(3),h=(n(62),n(5)),m=n(4),f=n(0),O=function(e){return Object(f.jsx)("header",{children:Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"navigation",children:[Object(f.jsx)("div",{className:"navigation-back",children:Object(f.jsx)(h.a,{icon:m.f})}),Object(f.jsx)("div",{className:"page-title",children:e.title}),Object(f.jsx)("div",{className:"menu-ham",children:Object(f.jsx)(h.a,{icon:m.i})})]})})})},p=(n(68),n(69),function(e){var t=e.uploadImage,n=e.name,c=e.text;return Object(f.jsxs)("div",{class:"upload-btn-wrapper",children:[Object(f.jsx)("button",{class:"btn btn-primary btn-block",children:c}),Object(f.jsx)("input",{type:"file",name:n,onChange:function(e){return t(e.target.files[0])}})]})}),v=n(9),g="http://127.0.0.1:8000",x=function(){var e=Object(o.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)(""),i=Object(j.a)(a,2),s=i[0],r=i[1],l=Object(o.useState)(""),h=Object(j.a)(l,2),m=h[0],x=h[1],y=Object(o.useState)(""),k=Object(j.a)(y,2),N=k[0],S=k[1],A=Object(o.useState)(),w=Object(j.a)(A,2),C=w[0],T=w[1],E=Object(v.d)();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O,{title:"Scrapbook App"}),Object(f.jsx)("div",{className:"all-books-container",children:Object(f.jsx)(d.A,{className:"btn btn-primary btn-sm",href:"/books",children:"View all books"})}),Object(f.jsx)("div",{className:"page-container reorder-page",children:Object(f.jsx)("div",{className:"container page-padding",children:Object(f.jsx)("div",{class:"flex-container",children:Object(f.jsxs)("div",{children:[n.map((function(e){return Object(f.jsx)("div",{children:Object(f.jsx)("ul",{children:Object(f.jsx)("li",{children:Object(f.jsx)(d.A,{href:"pages/".concat(e.id),children:e.name})})})},e.id)})),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(C);var t=document.createElement("canvas"),a=new u.fabric.Canvas(t,{backgroundColor:"#fff",selection:!1}),i=new FormData;i.append("canvas",JSON.stringify(a.toJSON())),i.append("cover",C,C.name),i.append("name",s),i.append("subtitle",m),i.append("title",N),i.append("image","".concat(g,"/static/images/blank.jpg")),fetch("".concat(g,"/api/book/"),{method:"POST",body:i}).then((function(e){return e.json()})).then((function(e){c([].concat(Object(b.a)(n),[e])),E.show("Book created successfully!",{type:"success"})})).catch((function(e){return console.log(e)}))},enctype:"multipart/form-data",children:[Object(f.jsx)("input",{value:s,onChange:function(e){return r(e.target.value)},type:"text",placeholder:"Book Title"}),Object(f.jsx)("input",{value:m,onChange:function(e){return x(e.target.value)},type:"text",placeholder:"Book Subtitle"}),Object(f.jsx)("input",{value:N,onChange:function(e){return S(e.target.value)},type:"text",placeholder:"First Page name"}),Object(f.jsx)("br",{}),Object(f.jsx)(p,{text:"Upload Book Cover",name:"upload_file",uploadImage:T}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{type:"submit",value:"Submit",className:"btn btn-primary",children:"Create new book"})]})]})})})})]})},y=n(14),k=n(8),N=(n(73),n(74),n(75),function(e){return{type:"SHOW_BOTTOMSLIDE",id:e}}),S=function(e){return{type:"HIDE_BOTTOMSLIDE",id:e}},A=function(e){var t=Object(k.b)(),n="0 0 ".concat(e.icon.icon[0]," ").concat(e.icon.icon[1]);return Object(f.jsxs)("div",{className:"canvas-button",id:e.id,onClick:function(){return t(N(e.id))},children:[Object(f.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":e.icon.prefix,"data-icon":e.icon.iconName,class:"svg-inline--fa ",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:n,children:Object(f.jsx)("path",{fill:"currentColor",d:e.icon.icon[4]})}),Object(f.jsx)("span",{children:e.text})]})},w=n(76),C="http://127.0.0.1:8000",T=null,E=null,_=!1,F=[],I=function(e){var t=Object(k.b)(),i=Object(o.useState)(""),s=Object(j.a)(i,2),r=(s[0],s[1],Object(o.useState)(0)),l=Object(j.a)(r,2),g=l[0],x=l[1],I=Object(o.useState)(),B=Object(j.a)(I,2),L=B[0],P=B[1],R=Object(o.useState)([]),M=Object(j.a)(R,2),D=M[0],q=M[1],J=Object(v.d)(),X=(Object(k.c)((function(e){return e.isSideNavActive})),Object(k.c)((function(e){return e.backgrounds}))),z=Object(k.c)((function(e){return e.shapes})),W=Object(k.c)((function(e){return e.text})),H=Object(k.c)((function(e){return e.fonts})),U=Object(k.c)((function(e){return e.updatePanelState})),V=Object(k.c)((function(e){return e.objectStates})),Y=Object(o.useRef)(null),G=Object(o.useRef)(null),Q=e.id,Z={body:{overflow:"hidden",height:"100vh",width:"100vw"}};Object(o.useEffect)((function(){var e;for(var n in Z.body)document.body.style[n]=Z.body[n];var i=Y.current.getBoundingClientRect();c=$(i),a=G.current.getBoundingClientRect(),T=new u.fabric.Canvas("canvas",{height:i.height-150,width:i.width-30,backgroundColor:"#fff",selection:!1}),E=new u.fabric.Canvas("canvas_display",{height:i.height-600,width:i.width-200,backgroundColor:"#fff",selection:!1}),oe(),u.fabric.Object.prototype.set((e={transparentCorners:!1,borderColor:"#333333",borderSize:5,cornerColor:"#333333",cornerSize:16,cornerStyle:"circle"},Object(y.a)(e,"cornerColor","#333333"),Object(y.a)(e,"padding",10),e)),u.fabric.Object.prototype.setControlsVisibility({tl:!0,mt:!1,tr:!0,ml:!1,mr:!1,bl:!0,mb:!1,br:!0,mtr:!0}),T.on("selection:created",(function(e){var t=e.target;te(t),ee(t)})),T.on("selection:updated",(function(e){var t=e.target;te(t),ee(t)})),T.on("selection:cleared",(function(e){e.target;te({name:"clear"})})),fetch("".concat(C,"/api/book/").concat(Q.id,"/page/").concat(Q.id),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){P(e),T.loadFromJSON(e.canvas,(function(){T.renderAll(),t({type:"SET_CANVAS",canvas:T}),K(e)}))})).catch((function(e){return console.log(e)}))}),[]);var K=function(e){fetch("".concat(C,"/api/book/images/").concat(Q.id,"/"),{method:"GET"}).then((function(e){return e.json()})).then((function(e){q(e)})).catch((function(e){return console.log(e)}))},$=function(e){var t=500,n=.05*e.width,c=.05*e.height;return e.width<700&&(t=400),e.width<500&&(t=300),{height:c,width:n,strokeWidth:n/14,fontWeight:t,lineHeight:2*c,lineSelectorHeight:.75*c}},ee=function(e){},te=function(e){var n;switch(e.name){case"text":n={activeObject:!0,text:!0,shape:!1,image:!1};break;case"shape":n={activeObject:!0,text:!1,shape:!0,image:!1};break;case"image":n={activeObject:!0,text:!1,shape:!1,image:!0};break;case"clear":n={activeObject:!1,text:!1,shape:!1,image:!1}}t({type:"SET_OBJECTS_STATE",action:n})},ne=function(e,t){var n=null;if(e.filters.length>0)for(var c=0;c<e.filters.length;c++){var a=e.filters[c];if(a.type.toUpperCase()==t.toUpperCase()){n=a;break}}return n?n[t]:0},ce=function(e,t){var n=E._objects[0];n.filters[e]=t,n.applyFilters(),E.renderAll()},ae=function(e,t,n){var c=E._objects[0];c.filters[e]&&(c.filters[e][t]=n,c.applyFilters(),E.renderAll())},ie=function(e){t({type:"SET_UPATE_PANEL_STATE",action:e}),x(ne(E._objects[0],e))},oe=function(){var e,t=document.createElement("img");t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAhQAAAIUB4uz/wQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHhSURBVEiJrdWxalRBFAbgb8IiqQXXImxKNXabaEAQfABJkVYhr2CpzRrzAMpaWVmksPMNUqVJEVdMY3wBEaKgENDgahyLOzfOvXuXZM0eOMzlzsz//+fMOTMhxmichRDauIkbWEpjwF7yd9iJMX4cCxJjHHG00MMQ8RT/iSe40IjVAL6A3TFgB8mb5vZxG91EGEYIsIajbNMQfayik62bwwpe4Dhb/wff0/fVCkFSnoO/x2JT2DVRy+k86hHdPyFIOc/TsonZ08Azkm7DeT3LCXo15WcGT/u3GiLYLiu0nbEPz5KWBoJ5bCRxJcFhSXA3+9mfFLyB7Doe43lJsJ4RrJ6XoO4tRYeWNjAFCyG8xDW8gk9J/cG0VONDwvw1g0uJ+Os01Ce7mMYvM3iAneTnthBCR1GZMJjqgab0rPpXNOutxNpXpOh1jHH/nEHcyb4HFPf7oWonb2D+P9QvqjZtu5zYNtrqWxOCz6p2ci+/i57WwIfoTgi+me3fRSsnuNcQwR6Wz5iWXPkRFk7m06IrafIbfmeLjxWPygrmMtCOolr6qtf0EdYqAtKGgEeKR2dJ8ZhP+mTu5sorBA1ht/AQP8aA1c+rV+a87iEBNloI4TJupTyXTlHfb9P4Jsb4eRzGXx2eQxOG+L0nAAAAAElFTkSuQmCC",u.fabric.Object.prototype.controls.mtr=new u.fabric.Control({x:0,y:-.55,offsetY:-20,cursorStyle:"pointer",actionHandler:u.fabric.controlsUtils.rotationWithSnapping,actionName:"rotate",render:(e=t,function(t,n,c,a,i){var o=this.cornerSize;t.save(),t.translate(n,c),t.rotate(u.fabric.util.degreesToRadians(i.angle)),t.drawImage(e,-o/2,-o/2,o+2,o),t.restore()}),cornerSize:26,withConnection:!1});var n=u.fabric.IText.prototype.initHiddenTextarea;u.fabric.util.object.extend(u.fabric.IText.prototype,{initHiddenTextarea:function(){n.call(this),this.canvas.wrapperEl.appendChild(this.hiddenTextarea)}})},se=function(e){var a;n(26).v4();switch(e.name){case"circle":a=new u.fabric.Circle({name:"shape",radius:50,left:200,top:200,originX:"center",originY:"center",fill:"#589edb"});break;case"rectangle":a=new u.fabric.Rect({name:"shape",width:200,height:100,originX:"center",originY:"center",left:200,top:200,fill:"#589edb",transparentCorners:!1,strokeUniform:!0,padding:10});break;case"triangle":a=new u.fabric.Triangle({name:"shape",width:100,height:100,originX:"center",originY:"center",left:200,top:200,fill:"#589edb"});break;case"star":var i=function(e,t,n){Math.PI;for(var c=t,a=t,i=Math.PI/e,o=[],s=0,r=0;r<e;r++){var l=c+Math.cos(s)*t,d=a+Math.sin(s)*t;o.push({x:l,y:d}),s+=i,l=c+Math.cos(s)*n,d=a+Math.sin(s)*n,o.push({x:l,y:d}),s+=i}return o}(5,50,25);a=new u.fabric.Polygon(i,{name:"shape",originX:"center",originY:"center",left:200,top:200,fill:"#589edb"},!1);break;case"polygon":var o=function(e,t){for(var n=2*Math.PI/e,c=t,a=t,i=[],o=0;o<e;o++){var s=c+t*Math.cos(o*n),r=a+t*Math.sin(o*n);i.push({x:s,y:r})}return i}(6,30);a=new u.fabric.Polygon(o,{name:"shape",originX:"center",originY:"center",left:200,top:200,height:100,width:100,fill:"#589edb"},!1);break;default:a=new u.fabric.Triangle({name:"shape",width:100,height:100,originX:"center",originY:"center",left:200,top:200,fill:"#589edb",transparentCorners:!1,strokeUniform:!0})}a.scaleToHeight(4*c.height),T.add(a),T.renderAll(),t(S())};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O,{title:L?L.title:""}),Object(f.jsxs)("div",{className:"container page-padding",children:[Object(f.jsxs)("div",{className:"canvas-box",ref:Y,children:[Object(f.jsx)("canvas",{id:"canvas"}),Object(f.jsxs)("div",{className:"canvas-buttons",children:[Object(f.jsx)(A,{icon:m.h,text:"Uploads",id:"upload_button"}),Object(f.jsx)(A,{icon:m.k,text:"Backgrounds",id:"background_button"}),Object(f.jsx)(A,{icon:m.p,text:"Text",id:"text_button"}),Object(f.jsx)(A,{icon:m.o,text:"Shapes",id:"shapes_button"})]})]}),Object(f.jsxs)("div",{className:"bottom-nav",children:[Object(f.jsx)("span",{className:"ham-circle",onClick:function(e){_?(document.querySelector(".bottom-nav").classList.remove("active"),_=!1):(document.querySelector(".bottom-nav").classList.add("active"),_=!0)},children:Object(f.jsx)(h.a,{icon:m.e})}),Object(f.jsxs)("div",{className:"nav-buttons",children:[Object(f.jsx)(d.A,{href:"/books",children:Object(f.jsxs)("div",{className:"nav-button",children:[Object(f.jsx)(h.a,{icon:m.d}),Object(f.jsx)("span",{children:"Books"})]})}),Object(f.jsxs)("div",{className:"nav-button",onClick:function(){fetch("".concat(C,"/api/book/").concat(Q.id,"/page/").concat(Q.id,"/"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({canvas:JSON.stringify(T.toJSON(["hasControls","hasBorders","selectable","id","class","name","ref_id","shapeType"])),image:T.toDataURL()})}).then((function(e){return e.json()})).then((function(e){J.show("Canvas saved!",{type:"success"})})).catch((function(e){return console.log(e)}))},children:[Object(f.jsx)(h.a,{icon:m.n}),Object(f.jsx)("span",{children:"Save"})]}),Object(f.jsxs)("div",{className:"nav-button",onClick:function(){T.undo()},children:[Object(f.jsx)(h.a,{icon:m.r}),Object(f.jsx)("span",{children:"Undo"})]})]})]}),Object(f.jsx)("div",{className:"sidenav ".concat(V.activeObject?"":"d_none"),children:Object(f.jsxs)("div",{className:"sidenav-container sidenav-object-container ".concat(V.activeObject?"":"d_none"),children:[Object(f.jsxs)("div",{className:"nav-button nav-button--secondary ".concat(V.text?"":"d_none"),onClick:function(){return t(N("fonts-container"))},children:[Object(f.jsx)(h.a,{icon:m.j}),Object(f.jsx)("span",{children:"Font"})]}),Object(f.jsxs)("div",{className:"nav-button nav-button--secondary ".concat(V.activeObject?"":"d_none"),onClick:function(e){var t=T.getActiveObject();t&&t.clone((function(e){e.set({left:e.left+30,top:e.top+10,evented:!0}),T.add(e),T.setActiveObject(e),T.renderAll()}),["hasControls","hasBorders","selectable","id","class","name","ref_id","shapeType"])},children:[Object(f.jsx)(h.a,{icon:m.m}),Object(f.jsx)("span",{children:"Duplicate"})]}),Object(f.jsxs)("div",{className:"nav-button nav-button--secondary ".concat(V.image||V.object?"":"d_none"),onClick:function(e){var t=T.getActiveObject();t&&(t.set("flipX",!t.flipX),T.renderAll())},children:[Object(f.jsx)(h.a,{icon:m.r}),Object(f.jsx)("span",{children:"Flip"})]}),Object(f.jsxs)("div",{className:"nav-button nav-button--secondary ".concat(V.image?"":"d_none"),onClick:function(){return a={width:.7*window.innerWidth,height:.7*window.innerWidth},E.clear(),T.getActiveObject().clone((function(e){e.set({left:0,top:0,evented:!0,hasControls:!1,height:a.height,width:a.width,selectable:!1,scaleX:1,scaleY:1}),x(ne(e,U)),E.setDimensions({width:a.width,height:a.height}),E.add(e),E.renderAll()})),void t(N("update-container"))},children:[Object(f.jsx)(h.a,{icon:m.a}),Object(f.jsx)("span",{children:"Adjust"})]}),Object(f.jsxs)("div",{className:"nav-button nav-button--secondary ".concat(V.activeObject?"":"d_none"),onClick:function(e){var t=T.getActiveObject();t&&(T.remove(t),T.renderAll())},children:[Object(f.jsx)(h.a,{icon:m.q}),Object(f.jsx)("span",{children:"Delete"})]})]})}),Object(f.jsx)("div",{className:"bottom-slide-container",onClick:function(e){e.target.classList.contains("bottom-slide-container")&&t(S())},children:Object(f.jsx)("div",{className:"bottom-slide",children:Object(f.jsxs)("div",{className:"container page-padding",children:[Object(f.jsxs)("div",{className:"bottom-slide-tools upload-container",children:[Object(f.jsx)(p,{text:"Upload Image",name:"upload_file",type:"file",uploadImage:function(e){var t=new FormData;t.append("image",e,e.name),t.append("page",L.id),fetch("".concat(C,"/api/book/upload/").concat(Q.id,"/"),{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){q([].concat(Object(b.a)(D),[e]))})).catch((function(e){return console.log(e)}))}}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{className:"upload-img-container",children:D.map((function(e,t){return Object(f.jsx)("div",{onClick:function(){return function(e){var t=n(26).v4(),a=new Image;a.onload=function(){var e=new u.fabric.Image(a,{id:t,left:100,top:100,name:"image"});e.scaleToHeight(4*c.height),T.add(e)},a.src=e}(C+e.image)},children:Object(f.jsx)("img",{src:C+e.image})},t)}))})]}),Object(f.jsxs)("div",{className:"bottom-slide-tools fonts-container",children:[Object(f.jsx)("h3",{className:"text-white",children:"Click to change font family of the text"}),H.map((function(e){return Object(f.jsx)("div",{className:"text-element "+e.name,onClick:function(){return function(e){var t=T.getActiveObject();t&&new w(e.fontFamily).load().then((function(){t.set("fontFamily",e.fontFamily),T.requestRenderAll()})).catch((function(e){console.log(e)}))}(e)},children:Object(f.jsx)("span",{style:{fontFamily:e.fontFamily},children:e.name})},e.id)}))]}),Object(f.jsxs)("div",{className:"bottom-slide-tools update-container",children:[Object(f.jsx)("div",{class:"canvas-display-container",ref:G,children:Object(f.jsx)("canvas",{id:"canvas_display"})}),Object(f.jsxs)("div",{class:"update-panel",children:[Object(f.jsxs)("div",{class:"range-container",children:[Object(f.jsx)("span",{className:"range-display",children:parseFloat(g).toFixed(2)}),Object(f.jsx)("input",{type:"range",min:"-1",max:"1",step:"0.003921",value:g,onChange:function(e){switch(x(e.target.value),U){case"brightness":F.includes(U)?(ae(0,"brightness",parseFloat(e.target.value)),F.push(U)):ce(0,new u.fabric.Image.filters.Brightness({brightness:parseFloat(e.target.value)}));break;case"saturation":F.includes(U)?(ae(1,"saturation",parseFloat(e.target.value)),F.push(U)):ce(1,new u.fabric.Image.filters.Saturation({saturation:parseFloat(e.target.value)}));break;case"contrast":F.includes(U)?(ae(2,"contrast",parseFloat(e.target.value)),F.push(U)):ce(2,new u.fabric.Image.filters.Contrast({contrast:parseFloat(e.target.value)}));break;case"blur":F.includes(U)?(ae(3,"blur",parseFloat(e.target.value)),F.push(U)):ce(3,new u.fabric.Image.filters.Blur({blur:parseFloat(e.target.value)}))}}})]}),Object(f.jsx)("h4",{style:{color:"#fff"},className:"state-heading text-capitalize",children:U}),Object(f.jsxs)("div",{className:"update-panel-container",children:[Object(f.jsx)("div",{onClick:function(){return ie("brightness")},className:"brightness active",children:Object(f.jsx)("img",{src:"http://localhost:3000/static/images/icons/brightness.svg"})}),Object(f.jsx)("div",{onClick:function(){return ie("contrast")},className:"contrast",children:Object(f.jsx)("img",{src:"http://localhost:3000/static/images/icons/contrast.svg"})}),Object(f.jsx)("div",{onClick:function(){return ie("saturation")},className:"saturation",children:Object(f.jsx)("img",{src:"http://localhost:3000/static/images/icons/saturation.svg"})}),Object(f.jsx)("div",{onClick:function(){return ie("blur")},className:"blur",children:Object(f.jsx)("img",{src:"http://localhost:3000/static/images/icons/blur.svg"})})]})]}),Object(f.jsxs)("div",{className:"button-container",children:[Object(f.jsx)("button",{class:"btn btn-primary",onClick:function(){var e=T.getActiveObject(),n=E._objects[0].filters;e.filters=n,e.applyFilters(),T.renderAll(),t(S())},children:"Save"}),Object(f.jsx)("button",{class:"btn btn-trasparent btn-block",onClick:function(){x(0);var e=T.getActiveObject(),t=E._objects[0];t.filters=[],e.filters=[],t.applyFilters(),e.applyFilters(),E.renderAll(),T.renderAll()},children:"Reset"})]})]}),Object(f.jsx)("div",{className:"bottom-slide-tools background-container img-container",children:X.map((function(e){return Object(f.jsx)("div",{onClick:function(){return function(e){u.fabric.Image.fromURL(e.src,(function(e){T.setBackgroundImage(e,T.renderAll.bind(T),{scaleX:T.width/e.width,scaleY:T.height/e.height})})),t(S())}(e)},children:Object(f.jsx)("img",{src:e.src,alt:e.name})},e.id)}))}),Object(f.jsxs)("div",{className:"bottom-slide-tools text-container",children:[Object(f.jsx)("h3",{className:"text-white",children:"Click to add text to add to page"}),W.map((function(e){return Object(f.jsx)("div",{className:"text-element "+e.type,onClick:function(){return function(e){var c=n(26).v4(),a=new u.fabric.IText(e.text,{left:100,top:100,fontSize:e.fontSize,fontWeight:e.fontWeight,id:c,name:"text",fontFamily:e.fontFamily});T.add(a),t(S())}(e)},children:Object(f.jsx)("span",{children:e.text})},e.id)}))]}),Object(f.jsx)("div",{className:"bottom-slide-tools shapes-container img-container",children:z.map((function(e){return Object(f.jsx)("div",{onClick:function(){return se(e)},children:Object(f.jsx)("img",{src:e.src,alt:e.name})},e.id)}))})]})})})]})]})},B=(n(77),n(78),function(e){return"".concat(window.location.origin,"/static/images/").concat(e)}),L=function(e){var t=e.book,n=e.toggleModal;return Object(f.jsxs)("div",{className:"book",onClick:function(){return n(t)},children:[Object(f.jsxs)("div",{className:"text",children:[Object(f.jsx)("h1",{children:t.name}),Object(f.jsx)("p",{children:t.subtitle}),Object(f.jsx)("div",{className:"img-container",children:Object(f.jsx)("img",{src:"http://127.0.0.1:8000"+t.cover})})]}),Object(f.jsxs)("div",{className:"dots",children:[Object(f.jsx)("div",{className:"dot"}),Object(f.jsx)("div",{className:"dot"}),Object(f.jsx)("div",{className:"dot"})]})]})},P=n(15),R=n.n(P);R.a.setAppElement("#root");var M="http://127.0.0.1:8000",D=function(e){var t=Object(o.useState)([]),n=Object(j.a)(t,2),c=n[0],a=n[1],i=Object(o.useState)(!1),s=Object(j.a)(i,2),r=s[0],l=s[1],b=Object(o.useState)(),u=Object(j.a)(b,2),p=u[0],g=u[1],x=Object(v.d)();function y(){l(!r)}Object(o.useEffect)((function(){fetch("".concat(M,"/api/book/")).then((function(e){return e.json()})).then((function(e){a(e)}))}),[]);var k=function(e){l(!r),g(e)};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(R.a,{style:{content:{border:"0",background:"transparent"}},isOpen:r,onRequestClose:y,contentLabel:"My dialog",children:Object(f.jsx)("div",{class:"modale","aria-hidden":"true",children:Object(f.jsxs)("div",{class:"modal-dialog",children:[Object(f.jsxs)("div",{class:"modal-header",children:[Object(f.jsx)("h2",{children:p?p.name:""}),Object(f.jsx)("span",{onClick:y,style:{cursor:"pointer"},class:"btn-close closemodale","aria-hidden":"true",children:"\xd7"})]}),Object(f.jsxs)("div",{class:"modal-body",children:[Object(f.jsx)(d.A,{href:"/view/".concat(p?p.id:""),children:Object(f.jsxs)("div",{className:"modal-item",children:[Object(f.jsx)("div",{className:"modal-item-icon",children:Object(f.jsx)(h.a,{icon:m.c})}),Object(f.jsx)("div",{className:"modal-item-title",children:"View book"})]})}),Object(f.jsx)(d.A,{href:"/pages/".concat(p?p.id:""),children:Object(f.jsxs)("div",{className:"modal-item",children:[Object(f.jsx)("div",{className:"modal-item-icon",children:Object(f.jsx)(h.a,{icon:m.b})}),Object(f.jsx)("div",{className:"modal-item-title",children:"Reorder pages"})]})}),Object(f.jsxs)("div",{className:"modal-item",onClick:function(){fetch("".concat(M,"/api/book/").concat(p.id,"/"),{method:"DELETE"}).then((function(){x.show("Book deleted successfully"),y(),a(c.filter((function(e){return e.id!==p.id})))}))},children:[Object(f.jsx)("div",{className:"modal-item-icon",children:Object(f.jsx)(h.a,{icon:m.l})}),Object(f.jsx)("div",{className:"modal-item-title",children:"Delete Book"})]})]}),Object(f.jsx)("div",{class:"modal-footer"})]})})}),Object(f.jsx)(O,{title:"My Books"}),Object(f.jsx)("div",{className:"page-container books-page",children:Object(f.jsxs)("div",{className:"container page-padding",children:[Object(f.jsxs)("div",{className:"alert-container ".concat(c.length>0?"d_none":""),children:[Object(f.jsx)("p",{children:"You currently have created no books, create a new book now."}),Object(f.jsx)("button",{class:"btn btn-primary btn-sm",children:Object(f.jsx)(d.A,{href:"/",children:"Create Book"})})]}),Object(f.jsx)("div",{className:"books-container",children:c.map((function(e){return Object(f.jsx)(L,{toggleModal:k,book:e,onClick:function(){return y()}},e.id)}))})]})})]})},q=n(37),J=n.n(q);n(96),n(97);R.a.setAppElement("#root");var X="http://127.0.0.1:8000",z=function(e){var t=Object(o.useState)([]),n=Object(j.a)(t,2),c=n[0],a=n[1],i=Object(o.useState)(!1),s=Object(j.a)(i,2),r=s[0],l=s[1],b=Object(o.useState)(),p=Object(j.a)(b,2),g=p[0],x=p[1],y=Object(v.d)(),k=e.id,N=document.createElement("canvas"),S=new u.fabric.Canvas(N,{backgroundColor:"#fff",selection:!1}),A={body:{backgroundColor:"#ddd"}};Object(o.useEffect)((function(){for(var e in C(),A.body)document.body.style[e]=A.body[e]}),[]);var w=function(){l(!r)},C=function(){fetch("".concat(X,"/api/book/").concat(k.id,"/")).then((function(e){if(e.ok)return e.json()})).then((function(e){a(e.pages)})).catch((function(e){return console.log(e)}))};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(R.a,{style:{content:{border:"0",background:"transparent"}},isOpen:r,onRequestClose:w,contentLabel:"My dialog",children:Object(f.jsx)("div",{class:"modale","aria-hidden":"true",children:Object(f.jsxs)("div",{class:"modal-dialog",children:[Object(f.jsxs)("div",{class:"modal-header",children:[Object(f.jsx)("h2",{children:g?g.name:""}),Object(f.jsx)("a",{onClick:w,href:"#",class:"btn-close closemodale","aria-hidden":"true",children:"\xd7"})]}),Object(f.jsxs)("div",{class:"modal-body",children:[Object(f.jsxs)("div",{className:"modal-item",children:[Object(f.jsx)("div",{className:"modal-item-icon",children:Object(f.jsx)(h.a,{icon:m.c})}),Object(f.jsx)("div",{className:"modal-item-title",children:Object(f.jsx)(d.A,{href:"/edit/".concat(g?g.id:""),children:"Edit Page"})})]}),Object(f.jsxs)("div",{className:"modal-item",onClick:function(){fetch("".concat(X,"/api/book/").concat(g.book,"/page/").concat(g.id,"/"),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){e.ok&&(y.show("Page deleted successfully"),C(),w())})).catch((function(e){return console.log(e)}))},children:[Object(f.jsx)("div",{className:"modal-item-icon",children:Object(f.jsx)(h.a,{icon:m.l})}),Object(f.jsx)("div",{className:"modal-item-title",children:"Delete Page"})]})]}),Object(f.jsx)("div",{class:"modal-footer"})]})})}),Object(f.jsx)(O,{title:"Book Name"}),Object(f.jsx)("div",{className:"page-container reorder-page",children:Object(f.jsx)("div",{className:"container page-padding",children:Object(f.jsxs)("div",{className:"pages-container",ref:function(e){if(e){J()([e],{})}},children:[c.map((function(e,t){return Object(f.jsxs)("div",{onClick:function(){return t=e,l(!r),x(t),void w();var t},className:"page-el",children:[Object(f.jsx)("div",{className:"page-el-cover",style:{background:'url("'.concat(e.image,'")')}}),Object(f.jsx)("span",{children:t+1})]})})),Object(f.jsx)("div",{className:"page-el",onClick:function(){var e=prompt("Enter page name");e&&fetch("".concat(X,"/api/book/").concat(k.id,"/page/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({canvas:JSON.stringify(S.toJSON()),title:e,image:"".concat(X,"/static/images/blank.jpg")})}).then((function(e){return e.json()})).then((function(e){y.show("Page added successfully!",{type:"success"}),C()})).catch((function(e){return console.log(e)}))},children:Object(f.jsx)("div",{title:"Add Page",className:"page-el-cover page-el-cover--add",style:{background:'url("https://storage.needpix.com/rsynced_images/instagram-3814061_1280.png")'}})})]})})})]})},W=(n(98),function(e){var t=e.book_id,n=Object(o.useState)([]),c=Object(j.a)(n,2),a=c[0],i=c[1];Object(o.useEffect)((function(){fetch("".concat("http://127.0.0.1:8000","/api/book/").concat(t,"/")).then((function(e){if(e.ok)return e.json()})).then((function(e){i(e.pages),console.log(e.pages)})).catch((function(e){return console.log(e)}))}),[]);var s=Object(o.useState)(0),r=Object(j.a)(s,2),l=r[0],d=r[1],b=Object(o.useState)(0),u=Object(j.a)(b,2),O=u[0],p=u[1],v=function(){return document.querySelector(".slide").clientWidth},g=function(e){var t=e.image,n={backgroundImage:"url(".concat(t,")"),backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",backgroundPosition:"50% 60%"};return Object(f.jsx)("div",{className:"slide",style:n})},x=function(e){return Object(f.jsx)("div",{className:"backArrow arrow",onClick:e.goToPrevSlide,children:Object(f.jsx)(h.a,{icon:m.f})})},y=function(e){return Object(f.jsx)("div",{className:"nextArrow arrow",onClick:e.goToNextSlide,children:Object(f.jsx)(h.a,{icon:m.g})})};return Object(f.jsxs)("div",{className:"slider",children:[Object(f.jsx)("div",{className:"slider-wrapper",style:{transform:"translateX(".concat(O,"px)"),transition:"transform ease-out 0.45s"},children:a.map((function(e,t){return Object(f.jsx)(g,{image:e.image},t)}))}),Object(f.jsx)(x,{goToPrevSlide:function(){0!==l&&(d(l-1),p(O+v()))}}),Object(f.jsx)(y,{goToNextSlide:function(){if(l===a.length-1)return d(l=0),p(O=0);d(l+1),p(O+-v())}})]})}),H=function(e){var t=e.id,n={body:{overflow:"hidden",height:"100vh",width:"100vw"}};return Object(o.useEffect)((function(){for(var e in n.body)document.body.style[e]=n.body[e]}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O,{title:"Book Name"}),Object(f.jsx)("div",{className:"page-container reorder-page",children:Object(f.jsx)("div",{className:"",children:Object(f.jsx)(W,{book_id:t.id})})})]})},U=function(e){return Object(f.jsx)("p",{children:"404"})},V={"/":function(){return Object(f.jsx)(x,{})},"/pages/:id":function(e){return Object(f.jsx)(z,{id:e})},"/edit/:id":function(e){return Object(f.jsx)(I,{id:e})},"/books":function(){return Object(f.jsx)(D,{})},"/view/:id":function(e){return Object(f.jsx)(H,{id:e})}};function Y(){var e=Object(d.useRoutes)(V);return Object(f.jsx)(f.Fragment,{children:e||Object(f.jsx)(U,{})})}var G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,102)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),i(e),o(e)}))},Q=n(21),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=null;switch(t.type){case"SHOW_SIDENAV":switch(t.id){case"text":n="sidenav-text-container";break;case"object":n="sidenav-object-container"}return document.querySelector(".sidenav")&&(document.querySelector(".sidenav-container.active")&&document.querySelector(".sidenav-container.active").classList.remove("active"),document.querySelector(".sidenav").classList.add("active"),document.querySelector(".".concat(n)).classList.add("active")),!e;case"HIDE_SIDENAV":return document.querySelector(".sidenav")&&document.querySelector(".sidenav").classList.remove("active"),e;default:return e}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=null;switch(t.type){case"SHOW_BOTTOMSLIDE":switch(t.id){case"upload_button":n="upload-container";break;case"background_button":n="background-container";break;case"text_button":n="text-container";break;case"shapes_button":n="shapes-container";break;case"fonts-container":n="fonts-container";break;default:n=t.id}return console.log(n),document.querySelector(".bottom-slide-container")&&(document.querySelector(".bottom-slide-tools.active")&&document.querySelector(".bottom-slide-tools.active").classList.remove("active"),document.querySelector(".bottom-slide-container").classList.add("active"),document.querySelector(".".concat(n)).classList.add("active")),!e;case"HIDE_BOTTOMSLIDE":return document.querySelector(".bottom-slide-container")&&document.querySelector(".bottom-slide-container").classList.remove("active"),e;default:return e}},$=function(){var e=[{id:"1",src:"".concat(B("backgrounds/1.jpg"))},{id:"2",src:"".concat(B("backgrounds/2.jpg"))},{id:"3",src:"".concat(B("backgrounds/3.jpg"))},{id:"4",src:"".concat(B("backgrounds/4.jpg"))},{id:"5",src:"".concat(B("backgrounds/5.jpg"))}];return e},ee=function(){var e=[{id:"1",src:"".concat(B("shapes/circle.svg")),name:"circle"},{id:"2",src:"".concat(B("shapes/polygon.svg")),name:"polygon"},{id:"3",src:"".concat(B("shapes/rectangle.svg")),name:"rectangle"},{id:"4",src:"".concat(B("shapes/triangle.svg")),name:"triangle"},{id:"5",src:"".concat(B("shapes/star.svg")),name:"star"}];return e},te=function(){var e=[Object(y.a)({id:"1",text:"Add a heading",type:"large",fontSize:32,fontWeight:700,fontFamily:"Roboto"},"type","large"),{id:"2",text:"Add a subheading",fontSize:22,fontWeight:500,fontFamily:"Roboto",type:"medium"},{id:"3",text:"Add a little bit of body text",fontSize:16,fontWeight:100,fontFamily:"Roboto",type:"small"}];return e},ne=function(){var e=[{id:"1",name:"Roboto",fontFamily:"Roboto"},{id:"2",name:"Pacifico",fontFamily:"Pacifico"},{id:"3",name:"Montez",fontFamily:"Montez"},{id:"4",name:"Josefin Sans",fontFamily:"Josefin Sans"},{id:"5",name:"Lobster",fontFamily:"Lobster"}];return e},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"brightness",t=arguments.length>1?arguments[1]:void 0;return"SET_UPATE_PANEL_STATE"===t.type&&(e=t.action,document.querySelector(".".concat(t.action))&&(document.querySelector(".update-panel-container .active")&&document.querySelector(".update-panel-container .active").classList.remove("active"),document.querySelector(".update-panel-container .".concat(t.action)).classList.add("active"))),e},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{activeObject:!1,shape:!1,image:!1,text:!1},t=arguments.length>1?arguments[1]:void 0;return"SET_OBJECTS_STATE"===t.type&&(e={activeObject:t.action.activeObject,image:t.action.image,shape:t.action.shape,text:t.action.text}),e},ie=Object(Q.a)({isSideNavActive:Z,isBottomSlideActive:K,backgrounds:$,shapes:ee,text:te,fonts:ne,updatePanelState:ce,objectStates:ae}),oe=n(38),se={position:v.b.center,timeout:5e3,offset:"30px",transition:v.c.SCALE},re=Object(Q.b)(ie,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(k.a,{store:re,children:Object(f.jsx)(v.a,Object(i.a)(Object(i.a)({template:oe.a},se),{},{children:Object(f.jsx)(Y,{})}))})}),document.getElementById("root")),G()}},[[99,1,2]]]);
//# sourceMappingURL=main.d4688449.chunk.js.map